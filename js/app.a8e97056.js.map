{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/VueVec3Control.vue?0c2a","webpack:///./src/assets/model/Chocola.glb","webpack:///./src/components/Scene3D.vue?408d","webpack:///./src/components/CustomSocket.vue?4d4d","webpack:///./src/App.vue?07a2","webpack:///./src/App.vue","webpack:///./src/components/Rete.vue","webpack:///./src/node/NodeListener.js","webpack:///./src/components/PreviewBox.vue","webpack:///./src/components/Scene3D.vue","webpack:///./src/node/utility/RenderManager.js","webpack:///./src/components/Scene3D.vue?c38d","webpack:///./src/node/utility/utility.js","webpack:///./src/node/compile/Compile.js","webpack:///./src/node/compile/DataDefine.js","webpack:///./src/node/utility/MaterialBuilder.js","webpack:///./src/components/PreviewBox.vue?248e","webpack:///./src/node/utility/ModelStore.js","webpack:///./src/components/VueNumControl.vue","webpack:///./src/components/VueNumControl.vue?8f5c","webpack:///./src/node/control/NumControl.js","webpack:///./src/node/compile/Types.js","webpack:///./src/components/CustomNode.vue","webpack:///./src/components/CustomSocket.vue","webpack:///./src/components/CustomSocket.vue?deea","webpack:///./src/components/CustomNode.vue?0b32","webpack:///./src/node/NodeComponent.js","webpack:///./src/node/comp/PreviewComponent.js","webpack:///./src/node/comp/NumComponent.js","webpack:///./src/node/compile/PredefinedMethod.js","webpack:///./src/components/VueVec2Control.vue","webpack:///./src/components/VueVec2Control.vue?e943","webpack:///./src/node/control/Vec2Control.js","webpack:///./src/components/VueVec3Control.vue","webpack:///./src/components/VueVec3Control.vue?d026","webpack:///./src/node/control/Vec3Control.js","webpack:///./src/components/VueVec4Control.vue","webpack:///./src/components/VueVec4Control.vue?d6fe","webpack:///./src/node/control/Vec4Control.js","webpack:///./src/components/VueDynamicControl.vue","webpack:///./src/components/VueDynamicControl.vue?81a5","webpack:///./src/node/control/DynamicControl.js","webpack:///./src/node/comp/MethodTemplateComponent.js","webpack:///./src/node/comp/ComputeComponent.js","webpack:///./src/node/comp/OutputComponent.js","webpack:///./src/node/comp/InputComponent.js","webpack:///./src/node/comp/Floats2RGBComponent.js","webpack:///./src/node/comp/BreakVec3Component.js","webpack:///./src/node/comp/DotComponent.js","webpack:///./src/node/comp/Vec2Component.js","webpack:///./src/node/comp/Vec3Component.js","webpack:///./src/node/comp/Vec4Component.js","webpack:///./src/node/utility/NodeGraphTemplate.js","webpack:///./src/node/utility/PreviewManager.js","webpack:///./src/node/utility/ReteManager.js","webpack:///./src/components/Rete.vue?0cb6","webpack:///./src/components/RenderVue.vue","webpack:///./src/components/RenderVue.vue?9d68","webpack:///./src/App.vue?8ecf","webpack:///./src/main.js","webpack:///./src/components/PreviewBox.vue?4e9f","webpack:///./src/assets/defaultAssets/errorTexture.png","webpack:///./src/components/CustomNode.vue?0406","webpack:///./src/components/VueDynamicControl.vue?b211","webpack:///./src/components/RenderVue.vue?89c7","webpack:///./src/components/Rete.vue?79be","webpack:///./src/components/VueVec4Control.vue?c37a","webpack:///./src/components/Rete.vue?a26b","webpack:///./src/components/VueVec2Control.vue?b46b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_createVNode","_component_RenderVue","_component_Scene3D","style","ref","modelStore","_component_Rete","id","class","_createElementVNode","_toDisplayString","enablePreview","_hoisted_4","type","$event","_hoisted_6","eventsNodeDirect","eventsNodeIndirect","install","editor","subEvents","Map","Rete","Node","on","func","this","removeListener","getListener","Engine","processWorker","node","extractInputData","inputData","component","components","outputData","trigger","worker","args","abort","emit","delete","has","set","EventEmitter","console","log","param","e","fill","xmlns","xmlns:xlink","version","viewBox","xml:space","points","_hoisted_2","title","width","height","_hoisted_5","_hoisted_8","fill-rule","_hoisted_11","_createElementBlock","nodeStyle","classInfo","styleInfo","state","onClick","onclick2","onclick","_hoisted_9","_hoisted_12","renderer","defaultMaterial","THREE","side","color","wireframe","defaultGeometry","defaultMesh","camera","light","renderList","Set","initThree","dom","antialias","canvas","alpha","setClearColor","requestAnimationFrame","render","renderSceneList","renderSceneInfo","eles","scene","elem","getBoundingClientRect","left","right","top","bottom","isOffscreen","domElement","clientHeight","clientWidth","aspect","updateProjectionMatrix","positiveYUpBottom","setScissor","setViewport","background","resizeRendererToDisplaySize","needResize","setSize","setScissorTest","clear","position","z","y","x","RenderManager","mesh","axes","controls","speed","add","remove","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","animate","rotation","update","ele","_setControl","globalData","props","created","mounted","renderManager","$nextTick","$refs","mountView","beforeUnmount","methods","watch","handler","newv","oldv","_this","f","toRaw","objects","immediate","computed","__exports__","string2Float","parseFloat","vecString2Float","extractMeshBufferType","v","typeName","Float32BufferAttribute","BufferAttribute","itemSize","emptyDom","element","firstElementChild","float2PointString","toString","indexOf","lerp","a","b","arrayLerp","deepClone","obj","hash","WeakMap","Array","from","val","Date","RegExp","source","flags","clone","constructor","assign","keys","map","kebabize","str","replace","$","ofs","toLowerCase","pointDistance","dx","dy","Math","pow","textWorker","inputs","grammar","presufix","k","varWorker","convertToEnumType","Types","members","convertToStringType","Variable","_value","isConstValue","turnVar2String","toStringFunc","implicitTransform","vv","Method","it","execute","isCompact","define","defineImplicit","fromName","toName","addImplicitTransform","outputType","tryCompute","vars","lambda","resultType","values","matchMethod","flag","undefined","matchMethods","matchPartMethods","resultFullMatch","resultNullMatch","flagMatch","flagNull","fullMatch","nullMatch","allMatch","gatherMethodsTypeSet","parameterPosition","tp","SUFFIX","IGNORE_ATTRS","MaterialBuilder","fragShaderText","vertShaderText","uniforms","loader","errorTexture","load","require","tex","map_","material","merge","ourTexture","vertexShader","fragmentShader","attrs","geometry","attributes","_generateUniformHeader","texture","_genenrateBufferInput","code","_generateFragShaderHeader","finalString","_genFragShader","_genVertShader","newMaterial","makeShaders","uniform","attrType","attrSuffix","useIgnore","displayText","matBuilder","Scene3D","buildMat","variable","fragShader","applyMaterialToAll","setState","func2","updated","sampleMesh","deep","ModelStore","meshes","textureMaterialMap","meshToTexture","ms","processGroup","layer","subobjs","children","subobj","uuid","orgmat","tmmap","relatedMesh","visible","path","onComplete","manager","onLoad","fbxLoader","GLTFLoader","xhr","loaded","total","error","mat","uniformsNeedUpdate","step","readonly","$props","$data","onInput","$options","onDblclick","onPointerdown","onPointermove","change","target","ikey","putData","emitter","getData","NumControl","VueNumControl","vueContext","Control","defineTypes","toFixed","postProcess","reteSocket","Socket","ls","combineWith","getSocket","asd","nodeClass","_ctx","size","_Fragment","_renderList","input","_component_Socket","socket","used","connections","socket-style-info","socketsStyle","socket-dynamic-info","getSocketDynamicInfoString","showControl","getControlClass","control","getControlStyle","output","errorInfo_","socketClass","socketStyleInfo","socketStyleExtra","socketDynamicInfo","mixins","VueRenderPlugin","basic","substring","mixin","io","getControl","st","sets","possibleSocketTemp","possibleSocket","getSocketDynamicInfoList","selected","CustomSocket","StyleManager","classInfo_","styleInfo_","makeStyleData","NodeStyleData","controlsStyle","addSocket","addControl","outputs","parent","genControlID","NodeComponent","eventManager","defaultInput","CustomNode","text","socketType","DynamicInput","addInput","controlType","DynamicOutput","addOutput","input2","extractInputKey","warn","NodeCustomize","build","applyNode","info","nodes","find","errorInfo","setErrorInfo","Component","multiConns","hide","alwaysShowName","connection","Input","multipleConnections","hasConnection","Error","thisSocket","inputSocket","compatibleWith","Connection","Output","styleClass","addStyle","removeStyle","addClass","removeClass","setValue","PreviewBoxComponent","PreviewBoxNode","defaultWidth","defaultHeight","templateData","_variable","reactive","_state","_applyFunc","el","app","createApp","PreviewBox","mount","pos","view","translate","bindSocket","bindControl","createVueComp","NumComponent","_addNumSocketOutput","num","MethodTemplate","templateVar","generateOperationMethod","singleOp","singleOpText","acceptType","template","methodLists","specialize","acceptTypeComplex","defineOpMethods","_fetchIndex2TextList","fetchIndex2Text","fetchIndex","generateBreakDownMethod","namePrefix","fetchName","maxv","max","methodList","genFetchIndexes","fetchIndexes","concat","moveArray","froma","toa","defineBreakDownMethods","methods_","basicIndexes","defineVariesFunction","g","dot","defineDot","defineStep","v1","v2","list","slist","input1","defineMix","interp","v3","defineMax","defineMin","defineDirectMapping","grammarName","sin","cos","tan","placeholder","Vec2Control","VueVec2Control","Vec3Control","VueVec3Control","w","Vec4Control","VueVec4Control","finv","DynamicControl","VueDynamicControl","_types","_type","MethodsList","outputName","inputNames","inputKeys","outputSet","inputSets","generateInputSets","MethodTemplateComponent","methodsLists","ml","inputSet","selfi","lastConnection","installed","getSocketType","_wrapSocketType","_addNumSocketInput","index","ind","_createOutputSocket","_createInputSocket","_getInputName","cs","cs2","removeConnection","accept","checkConnection","_getSocket","realNode","inKey","setSocket","clearErrorInfo","getRealNode","inputs2","_extractInput","nullMatchMethods","indml","outKey","outSocket","updateSocketConnections","resetInputSocketsType","_getInputKeys","$forceUpdate","addComponent","divComponent","multiComponent","minusComponent","OutputComponent","_addInput","InputComponent","socketName","Floats2RGComponent","Floats2RGBComponent","Floats2RGBAComponent","RG2FloatsComponent","RGB2FloatsComponent","RGBA2FloatsComponent","dotComponent","Vec2Component","Vec3Component","Vec4Component","TemplateConnection","inputKey","inputID","outputKey","outputID","TemplateNode","NodeGraphTemplate","fromSocket","fromNode","outputSocket","outputSocketTemplate","relativePosition","retainConnection","_saveNode","rec","_saveConnection","tn","genKey","tc","fromConnection","alwaysCreateNew","referencePos","viewNodes","tempMapNodes","newNodes","nodeTemplate","setData","createNode","addNode","newConnections","inputNode","outputNode","oldKey","oldID","newID","templateNode","ck","connect","genAlongSocketID","genSingleID","random","PreviewManager","_comp","register","previews","pointFloat","independentPreviewInteraction","IndependentPreviewInteraction","_enablePreview","setupInteraction","preview","setPosition","context","roughClone","force","removeNode","sockets","inpos","outpos","funcRemove","removePreview","addPreview","getPadding","idlePosition","translationAnimationTimer","RANGE","socketView","getSocketView","centerPos","getPosition","previewView","funcNodeUpdate","params","funcPreviewTranslated","addNodeClass","removeNodeClass","funcPreviewSelect","clearInterval","funcDragPreview","renamePreview","saveSocket","installPreview","setInterval","moved","finalPos","nv","getNodeView","removePreviewAlongSocket","previewArray","layouter","NodePreviewLayoutInfo","addPreviewAlongSocket","offsets","relayoutAll","PreviewInteractionPointFloat","_enablePreviewTime","time","pf","timeoutIn","tempTemplate","operations","funcCheckCompleteNew","tdata","createCompleteNew","applyFunc2","refPosition","applyToEditor","applyFunc","funcIndependOnEnter","curData","isEqual","isEquals","addControlStyle","removeControlStyle","funcIndependOnLeave","addEventListener","minPos","min","maxPos","ins","outs","inSocketPosMin","inSocketPosMax","outSocketPosMin","outSocketPosMax","inSocketPos","outSocketPos","inSocketAvgPos","outSocketAvgPos","relayout","avgPos","offsetY","curOffset","blankSpace","lastSocketPosY","previewview","previewHeight","socketPos","socketHeight","blank","nodeHeight","totalPreviewHeight","decayFactor","totalDecayedPreviewHeight","worldOffsetY","timeoutOut","pres","STATE_OUT_DOM","STATE_IN_DOM","STATE_ALREADY_DONE","STATE_FADE_OUT","partState","timerIn","timerOut","executeInFunc","addPreviewsSurroundNode","pointerenterFuncPreview","pointerleaveFuncPreview","executeOutFunc","removePreviewsSurroundNode","newpres","clearTimeout","setTimeout","pointerenterFunc","pointerleaveFunc","ReteManager","container","modelStore_","previewManager","NodeEditor","use","ConnectionPlugin","ContextMenuPlugin","AreaPlugin","PreviewComponent","NodeListener","engine","process","toJSON","_initNode","resize","zoomAt","method","nameMapping","methodlist","comp","outputComponent","_addMethod","addWorkEvent","removeAll","_buildComponents","_initEditor","mesh_","rebuild","n1","n2","previousPressedCtrl","initRete","rete","rawData","inited","document","ctrlKey","charCode","threejscanvas","RenderVue","loadModel","fshaders","fshaders2","App"],"mappings":"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","file":"js/app.a8e97056.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VueVec3Control.vue?vue&type=style&index=0&id=f682f51e&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"af0aa292b08c0de963ff646b6f02aa3c.glb\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Scene3D.vue?vue&type=style&index=0&id=35c14c58&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CustomSocket.vue?vue&type=style&index=0&id=0644603a&lang=sass\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=3721b798&lang=css\"","<template>\n  <RenderVue></RenderVue>\n  \n  <Scene3D style = \"width:200px;height:200px;position:fixed;padding:10px\" ref=\"previewAll\" v-bind:modelStore=\"this.modelStore\"></Scene3D>\n  <Rete style = \"width:100%;height:100%\" v-bind:modelStore=\"this.modelStore\"></Rete>\n</template>\n\n<script>\nimport Rete from './components/Rete.vue'\nimport Scene3D from './components/Scene3D.vue'\nimport RenderVue from './components/RenderVue.vue'\nimport ModelStore from './node/utility/ModelStore'\nexport default {\n  name: 'App',\n  data:()=>{\n    return {\n      modelStore:new ModelStore()\n    }\n  },\n  components: {\n    Rete,\n    Scene3D,\n    RenderVue\n  },\n  mounted: function() {\n    this.loadModel(require('./assets/model/Chocola.glb'));\n  },\n  methods:{\n    async loadModel(path){\n      let modelStore = new ModelStore();\n      modelStore.load(path,()=>{\n        console.log(\"Load complete\");\n        this.modelStore=modelStore;\n        console.log(this.modelStore)\n        });\n    }\n  },\n  computed:{\n    fshaders:function(){\n      console.log(\"shader changed :vue!\")\n      return this.fshaders2;\n    }\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  width: 100%;\n  height: 100vh;\n  padding: 0;\n  margin: 0;\n}\n</style>\n","<template>\r\n  <div id=\"rete\" ref=\"rete\" class=\"node-editor\"></div>\r\n  <div class=\"float-panel\">\r\n    <span\r\n      class=\"text\"\r\n      style=\"color: white; padding-bottom: 100px; margin-left: 0px\"\r\n      >PreviewBox {{this.enablePreview?'Enabled':'Disabled'}}</span\r\n    >\r\n    <span class=\"text\"><br />.</span>\r\n    <div>\r\n      <label class=\"switch\">\r\n        <input type=\"checkbox\" v-model=\"this.enablePreview\"/>\r\n        <span class=\"slider round\"></span>\r\n      </label>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n//TODO: fast coded template, optimize it!\r\n//TODO: resolve warnings\r\nimport ReteManager from \"./../node/utility/ReteManager\";\r\nimport { toRaw } from \"vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      enablePreview:false,\r\n      previousPressedCtrl:false\r\n    };\r\n  },\r\n  methods:{\r\n    initRete(){\r\n      let container = this.$refs.rete;\r\n      let rete = new ReteManager(container, this.modelStore);\r\n      this.$options.rawData.rete = rete;\r\n    },\r\n    inited(){\r\n      return this.$options.rawData.rete;\r\n    }\r\n  },\r\n  props: [\"modelStore\"],\r\n  async mounted() {\r\n    //let container = this.$refs.rete;\r\n    if(!this.inited() && this.modelStore){\r\n      this.initRete();\r\n    }\r\n    //let rete = new ReteManager(container, this.modelStore);\r\n    //this.$options.rawData.rete = rete;\r\n    \r\n    document.addEventListener('keydown',(e)=>{\r\n      if(e.ctrlKey){\r\n        this.enablePreview = true\r\n        this.previousPressedCtrl=true;\r\n      }\r\n    })\r\n\r\n    document.addEventListener('keypress',(e)=>{\r\n      if(e.charCode == 101){ //TODO: deprecated\r\n        this.enablePreview = !this.enablePreview\r\n      }\r\n    })\r\n\r\n    document.addEventListener('keyup',(e)=>{\r\n      if(!e.ctrlKey && this.previousPressedCtrl){\r\n        this.enablePreview = false\r\n        this.previousPressedCtrl=false;\r\n      }\r\n    })\r\n  },\r\n  rawData: {\r\n    rete: null,\r\n  },\r\n  watch: {\r\n    modelStore: function (newv, oldv) {\r\n      console.log(\"Update Mesh in Scene3D\");\r\n      if(!this.inited() && this.modelStore){\r\n        this.initRete();\r\n      }\r\n      if(this.inited()){\r\n        this.$options.rawData.rete.modelStore = toRaw(newv);\r\n      }\r\n      \r\n    },\r\n    enablePreview: {\r\n      handler(newv,oldv){\r\n        console.log(\"Enable preview!!!!!!!!!!!!\",newv,this.$options.rawData.rete);\r\n        if(!this.$options.rawData.rete){\r\n          return;\r\n        }\r\n        this.$options.rawData.rete.previewManager.enablePreview = newv;\r\n      },\r\n      immediate:false\r\n\r\n      }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"sass\">\r\n@import \"@/assets/css/nodeEditor.sass\"\r\n#rete\r\n  height: 100%\r\n  width: 100%\r\n</style>\r\n\r\n<style scoped>\r\n/* The switch - the box around the slider */\r\n.switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 60px;\r\n  height: 34px;\r\n}\r\n\r\n.float-panel {\r\n  left: 10px;\r\n  bottom: 10px;\r\n  z-index: 9999;\r\n  position: fixed;\r\n  padding: 5px;\r\n}\r\n\r\n/* Hide default HTML checkbox */\r\n.switch input {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\n/* The slider */\r\n.slider {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgb(173, 173, 173);\r\n  -webkit-transition: 0.4s;\r\n  transition: 0.4s;\r\n}\r\n\r\n.slider:before {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 26px;\r\n  width: 26px;\r\n  left: 4px;\r\n  bottom: 4px;\r\n  background-color: rgb(219, 219, 219);\r\n  -webkit-transition: 0.4s;\r\n  transition: 0.4s;\r\n}\r\n\r\ninput:checked + .slider {\r\n  background-color: #2196f3;\r\n}\r\n\r\ninput:focus + .slider {\r\n  box-shadow: 0 0 1px #2196f3;\r\n}\r\n\r\ninput:checked + .slider:before {\r\n  -webkit-transform: translateX(26px);\r\n  -ms-transform: translateX(26px);\r\n  transform: translateX(26px);\r\n}\r\n\r\n/* Rounded sliders */\r\n.slider.round {\r\n  border-radius: 34px;\r\n}\r\n\r\n.slider.round:before {\r\n  border-radius: 50%;\r\n}\r\n</style>","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport EventEmitter from 'events';\r\n\r\n/*\r\n    \"nodecreate\",\"nodecreated\",\r\n    \"noderemove\",\"noderemoved\",\r\n    \"connectioncreate\",\"connectioncreated\",\r\n    \"connectionremove\",\"connectionremoved\",\r\n    \"nodetranslated\",\"nodedraged\",\r\n    \"selectnode\",\"nodeselect\",\"nodeselected\"]\r\n    \"rendernode\",\r\n    \"rendersocket\",\r\n    \"rendercontrol\",\r\n    \"renderconnection\",\r\n    \"updateconnection\",\r\n    \"componentregister\",\r\n    \"keydown\",\"keyup\",\r\n    \"translate\",\"translated\",\r\n    \"zoom\",\"zoomed\",\"click\",\"mousemove\",\"contextmenu\",\"import\",\"export\",\"process\",\"error\",\"warn\"] \r\n */\r\nconst eventsNodeDirect = [\r\n    \"nodedraged\",\"nodeselect\",\"nodeselected\"\r\n]\r\n\r\nconst eventsNodeIndirect = [\r\n    \"translatenode\",\"nodetranslate\",\r\n    \"nodetranslated\",\"selectnode\",\"nodework\",\r\n    \"nodeworked\"\r\n]\r\n\r\n//TODO: support multiple editor\r\nfunction install(editor){\r\n    var subEvents = new Map()\r\n\r\n    // note, we cannot access NodeView, so we install method on the node\r\n    Rete.Node.prototype.on = function(name,func){\r\n        subEvents.get(this.id).on(name,func);\r\n    }\r\n    Rete.Node.prototype.removeListener = function(name,func){\r\n        subEvents.get(this.id).removeListener(name,func);\r\n    }\r\n    Rete.Node.prototype.getListener = function(name){\r\n        return subEvents.get(this.id)    \r\n    }\r\n\r\n    editor.bind(\"nodework\");\r\n    editor.bind(\"nodeworked\");\r\n\r\n    Rete.Engine.prototype.processWorker = async function(node){\r\n        const inputData = await this.extractInputData(node);\r\n        const component = this.components.get(node.name);\r\n        const outputData = {};\r\n        if (!component){\r\n            return outputData;\r\n        }\r\n        editor.trigger(\"nodework\",{node,inputData});\r\n        try {\r\n            await component.worker(node, inputData, outputData, ...this.args);\r\n        } catch (e) {\r\n            this.abort();\r\n            this.trigger('warn', e);\r\n        }\r\n        editor.trigger(\"nodeworked\",{node,inputData,outputData});\r\n        return outputData;\r\n    }\r\n    \r\n\r\n    editor.on('noderemoved',(node)=>{\r\n        subEvents.get(node.id).emit('noderemoved',node);\r\n        subEvents.delete(node.id)\r\n    });\r\n    editor.on('nodecreated',(node)=>{\r\n        if(!subEvents.has(node.id)){\r\n            subEvents.set(node.id,new EventEmitter());\r\n            console.log(subEvents,node,\"add\");\r\n        }\r\n    });\r\n    editor.on('rendernode',(param)=>{\r\n        const node = param.node;\r\n        if(!subEvents.has(node.id)){\r\n            subEvents.set(node.id,new EventEmitter());\r\n            console.log(subEvents,node,\"addr\");\r\n        }\r\n        subEvents.get(node.id).emit('rendernode',param);\r\n    });\r\n\r\n    for(let e of eventsNodeDirect){\r\n        editor.on(e,(param)=>{\r\n            subEvents.get(param.id).emit(e,param);\r\n        })\r\n    }\r\n    for(let e of eventsNodeIndirect){\r\n        editor.on(e,(param)=>{\r\n            subEvents.get(param.node.id).emit(e,param);\r\n        })\r\n    }\r\n}\r\n\r\nexport default{\r\n    name: 'sub-event',\r\n    install\r\n}\r\n","<template>\r\n  <div>\r\n    <div\r\n      v-bind:class=\"'node preview ' + this.nodeStyle.nodeStyle.classInfo.value\"\r\n      v-bind:style=\"this.nodeStyle.nodeStyle.styleInfo.value\"\r\n      style=\"width: 135px; height: 100px\"\r\n    >\r\n      <div style=\"display: inline; float: right\">\r\n        <button class=\"button preview-lock-button2\" \r\n          title=\"Apply the parameter set to original nodes\"\r\n          v-if=\"this.state.value == 'apply'\"\r\n          v-on:click=\"this.onclick2()\">\r\n          <svg\r\n            fill=\"#ffffff\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            style=\"enable-background: new 0 0 30 30\"\r\n            version=\"1.1\"\r\n            viewBox=\"0 0 30 30\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <path\r\n              d=\"M24,13.328V24H6V10h10.672l6-6H6C4.895,4,4,4.895,4,6v18c0,1.105,0.895,2,2,2h18c1.105,0,2-0.895,2-2V11.329L24,13.328z\"\r\n            />\r\n            <g>\r\n              <path\r\n                d=\"M28.957,5.543l0.525-0.525c0.69-0.69,0.69-1.81,0-2.5s-1.81-0.69-2.5,0l-0.525,0.525L28.957,5.543z\"\r\n              />\r\n            </g>\r\n            <g>\r\n              <polygon\r\n                points=\"25.043,4.457 14.475,15.025 14,18 16.975,17.525 27.543,6.957  \"\r\n              />\r\n            </g>\r\n          </svg>\r\n        </button>\r\n\r\n        <button\r\n          v-bind:class=\"'button preview-lock-button ' + this.state.value\"\r\n          v-on:click=\"this.onclick()\"\r\n        >\r\n          <svg\r\n            v-if=\"this.state.value == 'lock'\"\r\n            title=\"Keep the preview existing\"\r\n            fill=\"#ffffff\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 30 30\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            style=\"\"\r\n          >\r\n            <path\r\n              d=\"M 15 2 C 11.145666 2 8 5.1456661 8 9 L 8 11 L 6 11 C 4.895 11 4 11.895 4 13 L 4 25 C 4 26.105 4.895 27 6 27 L 24 27 C 25.105 27 26 26.105 26 25 L 26 13 C 26 11.895 25.105 11 24 11 L 22 11 L 22 9 C 22 5.2715823 19.036581 2.2685653 15.355469 2.0722656 A 1.0001 1.0001 0 0 0 15 2 z M 15 4 C 17.773666 4 20 6.2263339 20 9 L 20 11 L 10 11 L 10 9 C 10 6.2263339 12.226334 4 15 4 z\"\r\n            />\r\n          </svg>\r\n\r\n          <svg\r\n            v-if=\"this.state.value == 'unlock'\"\r\n            title=\"Let the preview disappears after some seconds\"\r\n            fill=\"#ffffff\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            viewBox=\"0 0 53.768 53.768\"\r\n            style=\"enable-background: new 0 0 53.768 53.768\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <g>\r\n              <path\r\n                d=\"M39.714,23.75h-2.08h-20.5V6.669C17.134,4.094,19.228,2,21.803,2h10.161c2.574,0,4.67,2.094,4.67,4.669v7.235\r\n\t\tc0,0.553,0.447,1,1,1s1-0.447,1-1V6.669c0-3.678-2.992-6.669-6.67-6.669H21.803c-3.678,0-6.669,2.991-6.669,6.669V23.75h-1.081\r\n\t\tc-3.678,0-6.669,2.991-6.669,6.669v16.679c0,3.678,2.991,6.67,6.669,6.67h25.661c3.678,0,6.67-2.992,6.67-6.67V30.419\r\n\t\tC46.384,26.741,43.392,23.75,39.714,23.75z M44.384,47.098c0,2.574-2.096,4.67-4.67,4.67H14.053c-2.575,0-4.669-2.096-4.669-4.67\r\n\t\tV30.419c0-2.575,2.094-4.669,4.669-4.669h2.081h21.5h2.08c2.574,0,4.67,2.094,4.67,4.669V47.098z\"\r\n              />\r\n            </g>\r\n          </svg>\r\n\r\n          <svg\r\n            v-if=\"this.state.value == 'apply'\"\r\n            title=\"Create a new group of nodes, and change the preset to the new group\"\r\n            fill=\"#ffffff\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            height=\"100%\"\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"100%\"\r\n          >\r\n            <path\r\n              d=\"M13,3 L5,3 L5,21 L15,21 L15,23 L5,23 C3.8954305,23 3,22.1045695 3,21 L3,3 C3,1.8954305 3.8954305,1 5,1 L15.4142136,1 L21,6.58578644 L21,14 L19,14 L19,9 L15,9 C13.8954305,9 13,8.1045695 13,7 L13,3 Z M19,19 L19,17 L21,17 L21,19 L23,19 L23,21 L21,21 L21,23 L19,23 L19,21 L17,21 L17,19 L19,19 Z M18.5857864,7 L15,3.41421356 L15,7 L18.5857864,7 Z\"\r\n              fill-rule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </button>\r\n\r\n        \r\n      </div>\r\n      <Scene3D\r\n        ref=\"p1\"\r\n        style=\"width: 100px; height: 100px; margin: 3px\"\r\n        v-bind:modelStore=\"this.modelStore\"\r\n      ></Scene3D>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Scene3D from \"./Scene3D.vue\";\r\nimport { toRaw } from \"vue\";\r\n// TODO: add width/height support\r\nimport MaterialBuilder from \"../node/utility/MaterialBuilder\";\r\nexport default {\r\n  name: \"PreviewBox\",\r\n  props: [\"modelStore\", \"variable\", \"nodeStyle\", \"state\", \"setState\", \"apply\"],\r\n  data: () => {\r\n    return {\r\n      displayText: \"\",\r\n      matBuilder: new MaterialBuilder(),\r\n    };\r\n  },\r\n  components: {\r\n    Scene3D,\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    buildMat() {\r\n      console.log(\"======================================\");\r\n      console.log(\"Update variable!\");\r\n      console.log(this.variable);\r\n      this.matBuilder.fragShader = toRaw(this.variable);\r\n      this.modelStore.applyMaterialToAll(toRaw(this.matBuilder.newMaterial));\r\n      console.log(\"======================================\");\r\n    },\r\n\r\n    onclick() {\r\n      if (this.state.value == \"lock\") {\r\n        this.setState(\"unlock\");\r\n      } else if (this.state.value == \"unlock\") {\r\n        this.setState(\"lock\");\r\n      } else if (this.state.value == \"apply\") {\r\n        this.apply.func();\r\n      }\r\n    },\r\n\r\n    onclick2(){\r\n      this.apply.func2();\r\n    }\r\n  },\r\n  updated: () => {},\r\n  computed: {},\r\n  watch: {\r\n    modelStore: {\r\n      handler: function (newv, oldv) {\r\n        console.log(newv, oldv);\r\n        if (!newv) {\r\n          return;\r\n        }\r\n        this.matBuilder.mesh = toRaw(newv).sampleMesh;\r\n        this.buildMat();\r\n      },\r\n      immediate: true,\r\n      deep: false,\r\n    },\r\n    variable: {\r\n      handler: function (newv, oldv) {\r\n        if (!this.modelStore) {\r\n          return;\r\n        }\r\n        this.buildMat();\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.preview-lock-button {\r\n  display: block;\r\n  margin: 4px;\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n.preview-lock-button2 {\r\n  display: block;\r\n  margin: 4px;\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n.lock {\r\n  background-color: rgba(180, 180, 180, 0.8);\r\n}\r\n</style>\r\n\r\n","<template>\r\n\r\n    <div ref=\"canvas\" class=\"three-js-render-area\"></div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport RenderManager from \"../node/utility/RenderManager\"\r\nimport {toRaw} from \"vue\"\r\n\r\n// vue prevent us from modifying any data inside vue component\r\n// also it is impossible to put the render manager to data, as it cause type issues\r\n// so a bruteforce way to resole this\r\n// key is dom\r\nconst globalData = new Map();\r\n\r\nexport default {\r\n    name: 'Scene3D',\r\n    data: function() {\r\n        return {\r\n        }\r\n    },\r\n    props:[\"modelStore\"],\r\n    created: function() {\r\n    },\r\n    mounted: function() {\r\n        // delay, so that we will get correct clientWidth\r\n        \r\n        let renderManager = new RenderManager();\r\n        this.$nextTick(function () {\r\n            globalData.set(this.$refs.canvas,renderManager)\r\n            renderManager.mountView(this.$refs.canvas)\r\n            renderManager.animate();\r\n        })\r\n    },\r\n    beforeUnmount: function(){\r\n        globalData.delete(this.$refs.canvas);\r\n    },\r\n    methods: {\r\n    },\r\n    watch:{\r\n        modelStore:{\r\n            handler(newv,oldv){\r\n                if(!newv){\r\n                    return;\r\n                }\r\n                const _this=this;\r\n                const f = function(){\r\n                    console.log(\"update scene3D modelStore\")\r\n                    let renderManager = globalData.get(_this.$refs.canvas)\r\n                    if(renderManager!=null){\r\n                        renderManager.mesh = toRaw(newv).objects;\r\n                    }else{\r\n                        _this.$nextTick(f);\r\n                    }\r\n                }\r\n                f();\r\n                \r\n            },\r\n            immediate: true\r\n        }\r\n    },\r\n    computed: {\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.three-js-render-area{\r\n    width:100%;\r\n    height:100%;\r\n    z-index: 0;\r\n    background:black;\r\n}\r\n</style>\r\n","import * as THREE from 'three'\r\nimport TrackballControls from 'three-trackballcontrols'\r\n\r\nconst defaultMaterial = new THREE.MeshStandardMaterial({\r\n    side: THREE.FrontSide,\r\n    color: 'hsl(0, 100%, 50%)',\r\n    wireframe: false\r\n})\r\nconst defaultGeometry = new THREE.BoxGeometry(100, 100, 100)\r\nconst defaultMesh = [new THREE.Mesh(defaultGeometry, defaultMaterial)];\r\nconst camera = new THREE.PerspectiveCamera(\r\n    75,\r\n    1,\r\n    0.1,\r\n    1000\r\n);\r\nconst light = new THREE.DirectionalLight('hsl(0, 100%, 100%)')\r\nconst renderList = new Set();\r\ncamera.position.z = 0\r\ncamera.position.y = 0;\r\ncamera.position.x = 200\r\nlet renderer;// = new THREE.WebGLRenderer({ antialias: true, canvas:document.getElementById(\"threejscanvas\") })\r\n\r\nfunction initThree(dom){\r\n    renderer = new THREE.WebGLRenderer({ antialias: true, canvas:dom, alpha: true });\r\n    renderer.setClearColor(0x000000, 0);\r\n    requestAnimationFrame(render);\r\n}\r\n\r\nfunction renderSceneList(){\r\n    for(let i of renderList){\r\n        renderSceneInfo(i.eles.scene,i.eles.camera,i.dom);\r\n    }\r\n}\r\nfunction renderSceneInfo(scene, camera, elem) {\r\n\r\n    // get the viewport relative position of this element\r\n    const { left, right, top, bottom, width, height } =\r\n        elem.getBoundingClientRect();\r\n    const isOffscreen =\r\n        bottom < 0 ||\r\n        top > renderer.domElement.clientHeight ||\r\n        right < 0 ||\r\n        left > renderer.domElement.clientWidth;\r\n\r\n    if (isOffscreen) {\r\n        return;\r\n    }\r\n\r\n    camera.aspect = width / height;\r\n    camera.updateProjectionMatrix();\r\n\r\n    const positiveYUpBottom = renderer.domElement.clientHeight - bottom;\r\n    renderer.setScissor(left, positiveYUpBottom, width, height);\r\n    renderer.setViewport(left, positiveYUpBottom, width, height);\r\n\r\n    scene.background = null;\r\n\r\n    renderer.render(scene, camera);\r\n}\r\n\r\nfunction resizeRendererToDisplaySize(renderer) {\r\n    const canvas = renderer.domElement;\r\n    const width = canvas.clientWidth;\r\n    const height = canvas.clientHeight;\r\n    const needResize = canvas.width !== width || canvas.height !== height;\r\n    if (needResize) {\r\n      renderer.setSize(width, height, false);\r\n    }\r\n    return needResize;\r\n}\r\n\r\nfunction render() {\r\n    resizeRendererToDisplaySize(renderer);\r\n    renderer.setScissorTest(false);\r\n    renderer.clear(true, true);\r\n    renderer.setScissorTest(true);\r\n    renderSceneList();\r\n    requestAnimationFrame(render);\r\n}\r\n\r\n\r\nclass RenderManager {\r\n\r\n    constructor(mesh = defaultMesh) {\r\n        this.dom = null;\r\n        const scene = new THREE.Scene()\r\n\r\n        //TODO: write shader like this: https://github.com/mrdoob/three.js/blob/1ba0eb4f57f6a34b843c8e17d1756dcee99f2b08/examples/jsm/shaders/AfterimageShader.js\r\n\r\n        const axes = new THREE.AxesHelper(100)\r\n        this.eles = {\r\n            scene: scene,\r\n            camera: camera,\r\n            controls: null,\r\n            renderer: renderer,\r\n            light: light,\r\n            mesh: mesh,\r\n            axes: axes,\r\n            speed: 0.002,\r\n            //shouldUpdate: false //delay the update to animate()\r\n        }\r\n        this.eles.scene.add(this.eles.camera)\r\n        //this.eles.scene.add(this.eles.light)\r\n        this.eles.scene.add(this.eles.axes)\r\n        for (const i of this.eles.mesh) {\r\n            this.eles.scene.add(i)\r\n        }\r\n        //this.eles.light.position.set(0, 20, 200)\r\n        //this.eles.camera.position.z = 0\r\n        //this.eles.camera.position.y = 0;\r\n        //this.eles.camera.position.x = 200\r\n        this.eles.scene.background = new THREE.Color('rgb(255,255,255)')\r\n        this.eles.scene.add(new THREE.AmbientLight(new THREE.Color(1,1,1)))\r\n\r\n    }\r\n\r\n    unmountView() {\r\n        this.dom = null;\r\n        renderList.remove(this);\r\n    }\r\n\r\n    _setControl() {\r\n        if (this.eles.controls) {\r\n            delete this.eles.controls;\r\n        }\r\n        this.eles.controls = null;\r\n        this.eles.controls = new TrackballControls(this.eles.camera, this.dom)\r\n        this.eles.controls.rotateSpeed = 1.0\r\n        this.eles.controls.zoomSpeed = 5\r\n        this.eles.controls.panSpeed = 0.8\r\n        this.eles.controls.noZoom = false\r\n        this.eles.controls.noPan = false\r\n        this.eles.controls.staticMoving = true\r\n        this.eles.controls.dynamicDampingFactor = 0.3\r\n    }\r\n\r\n    setSize(width, height) {\r\n        this.eles.camera.aspect = width / height;\r\n        this.eles.camera.width = width;\r\n        this.eles.camera.height = height;\r\n    }\r\n\r\n    animate() {\r\n        if (!this.dom) {\r\n            return;\r\n        }\r\n        requestAnimationFrame(() => { this.animate() })\r\n        \r\n        this.eles.mesh[0].rotation.y += this.eles.speed\r\n        this.eles.controls.update()\r\n    }\r\n\r\n    mountView(ele) {\r\n        this.dom = ele;\r\n        this.setSize(ele.clientWidth, ele.clientHeight)\r\n        this._setControl();\r\n        console.log(\"Add to renderList\")\r\n        console.log(renderList)\r\n        renderList.add(this);\r\n    }\r\n\r\n    set mesh(m) {\r\n        if (m.length == 0) {\r\n            console.log(\"ignore empty mesh\")\r\n            return;\r\n        }\r\n\r\n        for (const i of this.eles.mesh) {\r\n            this.eles.scene.remove(i)\r\n        }\r\n\r\n        for (const i of m) {\r\n            this.eles.scene.add(i);\r\n        }\r\n        this.eles.mesh = m;\r\n    }\r\n}\r\n\r\nexport default RenderManager;\r\nexport {initThree}","import { render } from \"./Scene3D.vue?vue&type=template&id=35c14c58&scoped=true\"\nimport script from \"./Scene3D.vue?vue&type=script&lang=js\"\nexport * from \"./Scene3D.vue?vue&type=script&lang=js\"\n\nimport \"./Scene3D.vue?vue&type=style&index=0&id=35c14c58&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35c14c58\"]])\n\nexport default __exports__","\r\nimport {BufferAttribute, Float32BufferAttribute} from \"three\"\r\n\r\nfunction string2Float(x){\r\n    if(typeof x==\"number\"){\r\n        return x;\r\n    }\r\n    if (process.env.NODE_ENV === \"development\") {\r\n        //debug code\r\n        if(typeof x!=\"string\"){\r\n            console.log(\"Error while parsing x to float\")\r\n            console.log(x);\r\n        }\r\n    }\r\n    const r = parseFloat(x);\r\n    if(r){\r\n        return r;\r\n    }else{\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction vecString2Float(x){\r\n    let newv=[]\r\n    for(const i in x){\r\n        newv[i] = string2Float(x[i]);\r\n    }\r\n    return newv;\r\n}\r\n\r\n//input mesh.geometry each buffer input\r\n//return a type name in glsl\r\nfunction extractMeshBufferType(v){\r\n    let typeName = null;\r\n    //fast coding!\r\n    if(v instanceof Float32BufferAttribute || v instanceof BufferAttribute){\r\n        switch(v.itemSize){\r\n            case 1:\r\n                typeName=`float`;\r\n                break;\r\n            case 2:\r\n            case 3:\r\n            case 4:\r\n                typeName=`vec${v.itemSize}`\r\n                break;\r\n            default:\r\n                console.log(\"buffer itemSize>4, this should not happen >\"+v.itemSize);\r\n                console.log(v);\r\n                break;\r\n        }\r\n    }else{\r\n        console.log(\"Not implemented! for other type of buffer attribute\");\r\n    }\r\n    return typeName;\r\n}\r\n\r\nfunction emptyDom(element) {\r\n    while(element.firstElementChild) {\r\n       element.firstElementChild.remove();\r\n    }\r\n}\r\n\r\n// some issues with core.js settings, I cannot use function.bind(variables), so I write an own version\r\n// just to make sure the project is able to run.\r\nfunction bindFunction(func,...vars){\r\n    return ()=>{func(...vars)};\r\n}\r\n\r\n// convert number to 0.0f format, to indicate it is a float number.\r\nfunction float2PointString(v){\r\n    let r = v.toString();\r\n    if(r.indexOf(\".\")==-1){\r\n        r+=\".0f\";\r\n    }else{\r\n        r+=\"f\";\r\n    }\r\n    return r;\r\n}\r\n\r\n// return linear interperation\r\nfunction lerp(a,b,t){\r\n    return (b-a)*t+a\r\n}\r\n\r\nfunction arrayLerp(a,b,t){\r\n    result = []\r\n    const l = a.length()\r\n    for(let i=0;i<l;i++){\r\n        result.push(lerp(a[i],b[i],t))\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction deepClone(obj, hash = new WeakMap()) {\r\n    if (Object(obj) !== obj) return obj; // primitives\r\n    if (hash.has(obj)) return hash.get(obj); // cyclic reference\r\n    let result =   obj instanceof Set ? new Set(obj) \r\n                 : obj instanceof Map ? new Map(Array.from(obj, ([key, val]) => \r\n                                        [key, deepClone(val, hash)])) \r\n                 : obj instanceof Date ? new Date(obj)\r\n                 : obj instanceof RegExp ? new RegExp(obj.source, obj.flags):null;\r\n    if(!result){//left cases\r\n        if (typeof obj.clone==\"function\"){\r\n            result = obj.clone() // customized method\r\n            hash.set(obj, result);\r\n            return result;\r\n        }else if (obj.constructor){\r\n            result = new obj.constructor();\r\n        }else{\r\n            result = Object.create(null)\r\n        }\r\n    }\r\n    hash.set(obj, result);\r\n    return Object.assign(result, ...Object.keys(obj).map(\r\n        key => ({ [key]: deepClone(obj[key], hash) }) ));\r\n}\r\n\r\nconst kebabize = (str) => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? \"-\" : \"\") + $.toLowerCase())\r\n\r\nfunction pointDistance(a,b){\r\n    const dx = a[0]-b[0];\r\n    const dy = a[1]-b[1];\r\n    return Math.pow(dx*dx+dy*dy,0.5)\r\n}\r\nexport {string2Float, vecString2Float, extractMeshBufferType, \r\n    emptyDom, bindFunction, float2PointString, lerp, arrayLerp, deepClone, kebabize,\r\n    pointDistance\r\n}","\r\n/**\r\n * A simple text replacer\r\n * @param {Dictionary} inputs {a:1,b:\"vec2(0.5,1.0)\"}\r\n * @param {string} grammar something like \"#a#+vec3(1.0,#bvar#)\"\r\n * @param {string} presufix a => ${presufix}a${presufix}\r\n * @returns replace all inputs with corresponding values \"1+vec3(1.0,vec2(0.5,1.0))\"\r\n */\r\nfunction textWorker(inputs,grammar,presufix=\"#\"){\r\n    let t = grammar;\r\n    for(let k in inputs){\r\n        t = t.replace(presufix+k+presufix,inputs[k].toString())\r\n    }\r\n    return t;\r\n}\r\n\r\n\r\n/**\r\n * An advanced replacer, for Variables\r\n * \r\n * @param {*} inputs \r\n * @param {*} grammar \r\n * @param {*} presufix \r\n * @returns \r\n */\r\nfunction varWorker(inputs,grammar,presufix=\"#\"){\r\n    let t = grammar;\r\n    console.log(inputs)\r\n    for(let k in inputs){\r\n        t = t.replace(presufix+k+presufix,inputs[k].toString())\r\n        console.log(inputs[k].toString())\r\n        console.log(t)\r\n        //TODO: a better generator, current is tooooooo bruteforce and inflexible!\r\n        //Although we do not do the code analysis, but at least make it not too long for glsl compiler.\r\n    }\r\n    return t;\r\n}\r\n\r\n\r\nexport {textWorker, varWorker}","import { deepClone } from \"../utility/utility\";\r\nimport { varWorker } from \"./Compile\";\r\nfunction convertToEnumType(name) {\r\n    if (typeof name == \"string\") {\r\n        const v = Types.members[name];\r\n        if (v) {\r\n            return v;\r\n        } else {\r\n            console.log(\"Undefined type enum > \" + name);\r\n            return Types.members['null'];\r\n        }\r\n    }\r\n    //debug code:\r\n    if(!name){\r\n        console.log(\"<Undefined Value> for type name\");\r\n        let a=null;\r\n        a.b.c=1;\r\n        return Types.members['null'];\r\n    }\r\n    return name;\r\n}\r\n\r\nfunction convertToStringType(name){\r\n    if(typeof name==\"string\"){\r\n        return name;\r\n    }else{\r\n        return name.name;\r\n    }\r\n}\r\n\r\nclass Variable {\r\n    constructor(type, value = null) {\r\n        this.type = convertToEnumType(type)\r\n        this._value = value;\r\n        this.isConstValue = typeof value != \"string\"; //if is constant, we will compute directly, otherwise, use shader to compute\r\n    }\r\n\r\n    toString(){\r\n        return this.type.turnVar2String(this);\r\n    }\r\n\r\n    clone(){\r\n        return new Variable(this.type,deepClone(this.value));\r\n    }\r\n\r\n    get value() {\r\n        return this._value\r\n    }\r\n\r\n    set value(v) {\r\n        if (this._value != v) {\r\n            this._value = v;\r\n            this.isConstValue= typeof value != \"string\";\r\n        }\r\n    }\r\n\r\n    isEquals(v){\r\n        return v instanceof Variable && v.value==this.value && this.type == v.type\r\n    }\r\n\r\n}\r\n\r\nclass Types {\r\n    constructor(name,toStringFunc = null) {\r\n        this.name = name;\r\n        this.implicitTransform = {}\r\n        //this.father = Set();\r\n        //this.children = Set();\r\n        Types.members[name] = this;\r\n        this.toStringFunc = toStringFunc;\r\n    }\r\n\r\n    turnVar2String(v){\r\n        const vv = v.value;\r\n        if(typeof vv ==\"string\"){\r\n            return vv;\r\n        }\r\n        if(this.toStringFunc){\r\n            return this.toStringFunc(vv);\r\n        }else{\r\n            return `${vv}`;\r\n        }\r\n       \r\n    }\r\n\r\n    // transform from the type\r\n    // for grammar, we use #value# as input \r\n    addImplicitTransform(name, func, grammar) {\r\n        this.implicitTransform[convertToStringType(name)] = \r\n            new Method(\"$\"+name+\">\"+this.name,{\"input\":name},this,func,grammar);\r\n    }\r\n\r\n    toString(){\r\n        return this.name;\r\n    }\r\n\r\n    tryTransform(v) {\r\n        let it = this.implicitTransform[v.type];\r\n        if (it) {\r\n            return it.execute({\"input\":v});\r\n        }\r\n        return null;\r\n    }\r\n    /*\r\n        addFather(name){\r\n            this.father.add(name)\r\n            Types.members[name].children.add(name);\r\n        }\r\n    \r\n        addChild(name){\r\n            Types.members[name].addFather(name);\r\n        }\r\n    \r\n        isFather(name){\r\n            //TODO: optimize with cache or id to lower memory usage\r\n            if (this.children.has(name)){\r\n                return true;\r\n            }else{\r\n                for(let i of this.children){\r\n                    const tp = Types.members[i];\r\n                    const result = tp.isFather(name);\r\n                    if(result){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }*/\r\n}\r\nTypes.members = {}\r\nTypes.isCompact = function (a, b) {\r\n    if (convertToEnumType(a).implicitTransform[convertToStringType(b)]) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nTypes.define = function (name, toStringFunc) {\r\n    new Types(name, toStringFunc);\r\n}\r\n\r\nTypes.defineImplicit = function (fromName, toName, func, grammar) {\r\n    Types.members[toName].addImplicitTransform(fromName, func, grammar);\r\n}\r\n\r\nclass Method{\r\n    constructor(name,inputs,outputType,func,grammar){\r\n        this.name = name;\r\n        this.inputs = inputs; // dictionary of types\r\n        for(let i in this.inputs){\r\n            this.inputs[i] = convertToEnumType(this.inputs[i]);\r\n        }\r\n        this.outputType = convertToEnumType(outputType); // output type\r\n        this.func = func;\r\n        this.grammar = grammar;\r\n    }\r\n\r\n    execute(inputs){\r\n        return tryCompute(inputs,this.func,this.outputType,this.grammar);\r\n    }\r\n\r\n\r\n}\r\n\r\n//TODO: implicit match is not implement!\r\nMethod.matchMethod = function(methods,name,inputs){\r\n    for(const m of methods){\r\n        if(m.name==name){\r\n            let flag=true;\r\n            for(const i in inputs){\r\n                const a = convertToEnumType(inputs[i].type);\r\n                const b = convertToEnumType(m.inputs[i]);\r\n                if(typeof a == undefined || typeof b == undefined){\r\n                    flag=false;\r\n                    break;\r\n                }\r\n                if(a!=b){\r\n                    flag=false;\r\n                    break;\r\n                }\r\n            }\r\n            if(flag){\r\n                return m;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nMethod.matchMethods = function(methods,name,inputs){\r\n    let result = []\r\n    for(const m of methods){\r\n        if(m.name==name){\r\n            let flag=true;\r\n            for(const i in inputs){\r\n                const a = convertToEnumType(inputs[i].type);\r\n                const b = convertToEnumType(m.inputs[i]);\r\n                if(typeof a == undefined || typeof b == undefined){\r\n                    flag=false;\r\n                    break;\r\n                }\r\n                if(a!=b){\r\n                    flag=false;\r\n                    break;\r\n                }\r\n            }\r\n            if(flag){\r\n                result.push(m);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// null will match every thing, extra inputs does not affect this\r\n// a more flexible version for matching methods\r\nMethod.matchPartMethods = function(methods,name,inputs){\r\n    let resultFullMatch = []\r\n    let resultNullMatch = []\r\n    for(const m of methods){\r\n        if(m.name==name || name == null){ // if name is null, then match all methods\r\n            let flagMatch=true;\r\n            let flagNull=false;\r\n            for(const i in m.inputs){ //extra inputs will be ignored!\r\n                if(!inputs[i]){ //input not exists\r\n                    flagNull=true;\r\n                    continue;\r\n                }\r\n                const a = convertToEnumType(inputs[i].type);\r\n                const b = convertToEnumType(m.inputs[i]);\r\n                if(typeof a == undefined || typeof b == undefined){\r\n                    flagMatch=false;\r\n                    break;\r\n                }\r\n                flagNull = flagNull || a.name=='null'\r\n                if(a!=b && a.name!='null'){\r\n                    flagMatch=false;\r\n                    break;\r\n                }\r\n            }\r\n            if(flagMatch){\r\n                if(flagNull){\r\n                    resultNullMatch.push(m)\r\n                }else{\r\n                    resultFullMatch.push(m)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        fullMatch:resultFullMatch,\r\n        nullMatch:resultNullMatch,\r\n        allMatch:[...resultFullMatch,...resultNullMatch]\r\n    };\r\n}\r\n\r\n//gather types of the specific input keys\r\n//input '' to gather output types\r\nMethod.gatherMethodsTypeSet = function(methods,parameterPosition){\r\n    let result = new Set();\r\n    let tp;\r\n    for(const m of methods){\r\n        if(parameterPosition==''){\r\n           tp = m.outputType\r\n        }else{\r\n            tp = m.inputs[parameterPosition]\r\n        }\r\n        if(tp){\r\n            result.add(tp.name)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction tryCompute(vars, lambda, resultType, grammar) {\r\n    console.log(vars);\r\n    console.log(Object.values(vars));\r\n    let values = Object.values(vars);\r\n    for (let i of values) {\r\n        if (!i.isConstValue) {\r\n            return new Variable(resultType,varWorker(vars,grammar))\r\n        }\r\n    }\r\n    return new Variable(resultType, lambda(...values.map((v)=>v.value)));\r\n}\r\n\r\n\r\nexport { Variable, tryCompute, Types, Method };","import * as THREE from 'three'\r\nimport { Variable } from '../compile/DataDefine';\r\nimport { extractMeshBufferType,float2PointString } from \"./utility\"\r\n\r\nconst SUFFIX=\"_\";\r\nconst IGNORE_ATTRS=new Set(\r\n    [\"position\",\"normal\",\"uv\",\"color\"]\r\n) //these attribute should be ignored, as three.js has already define these element\r\n\r\n\r\nclass MaterialBuilder{\r\n\r\n    constructor(){\r\n        this.mesh = null;\r\n        this.fragShaderText = \"\";\r\n        this.vertShaderText = \"\";\r\n        this.map = null\r\n        this.uniforms = {\r\n            \"time\": { value: 1.0 }, //TODO: selective, make time dynamic\r\n            'ourTexture': null\r\n        }\r\n        let loader = new THREE.TextureLoader();\r\n        this.errorTexture = null;\r\n        loader.load(require('./../../assets/defaultAssets/errorTexture.png'), \r\n        (tex)=>{\r\n            this.errorTexture=tex\r\n        });\r\n    }\r\n\r\n    makeShaders(map_=null){\r\n        console.log(\"Shader info\");\r\n        console.log(this.vertShaderText)\r\n        console.log(\"--\")\r\n        console.log(this.fragShaderText)\r\n        const material = new THREE.ShaderMaterial({\r\n            uniforms:THREE.UniformsUtils.merge([{\r\n                //time: { value: 1.0 }, //TODO: selective, make time dynamic\r\n                ourTexture: {type:'t',value: this.errorTexture}\r\n            }]),\r\n            vertexShader: this.vertShaderText,\r\n            fragmentShader: this.fragShaderText,\r\n            map: map_\r\n        });\r\n        return material;\r\n    }\r\n\r\n    _genVertShader(){\r\n        let mesh = this.mesh;\r\n        const attrs = mesh.geometry.attributes;\r\n        let s = this._generateUniformHeader();\r\n        const texture = mesh.material.map;\r\n        if(texture | true){\r\n            s+= \"\\\r\n                uniform sampler2D ourTexture;\\n\";\r\n        }\r\n        s+=this._genenrateBufferInput(mesh,\"attribute\",\"\",IGNORE_ATTRS);\r\n        s+=this._genenrateBufferInput(mesh,\"varying\",SUFFIX);\r\n        s+=\"void main() {\\n\"\r\n        for(const k in attrs){\r\n            s+=`${k}${SUFFIX} = ${k};\\n`\r\n        }\r\n        s+=\"gl_Position = projectionMatrix * (modelViewMatrix * vec4( position, 1.0 ));\\n\"\r\n        s+=\"}\\n\"\r\n        return s;\r\n    }\r\n\r\n    _genFragShader(code){\r\n        let s = this._generateFragShaderHeader(this.mesh)\r\n        s+=\"void main(){\\n  gl_FragColor = \"+code+\";\\n}\"\r\n        return s;\r\n    }\r\n\r\n    set fragShader(code){\r\n        if(!this.mesh){\r\n            console.log(\"Not ready, skip compiling\")\r\n            return;\r\n        }\r\n        console.log(\"Begin Compile\")\r\n        let finalString = \"\";\r\n        //TODO: manage all types and for constants\r\n        if(code instanceof Variable){\r\n            switch(code.type.name){\r\n                case \"vec4\":\r\n                    finalString = `vec4(${code.value})`\r\n                    break;\r\n                case \"vec3\":\r\n                    finalString = `vec4(${code.value},1.0f)`\r\n                    break;\r\n                case \"vec2\":\r\n                    finalString = `vec4(${code.value},0.0f,1.0f)`\r\n                    break;\r\n                case \"float\":{ //make ESLint happy\r\n                    const s = code.isConstValue?float2PointString(code.value):code.value;\r\n                    finalString = `vec4(${s},${s},${s},1.0f)`\r\n                    break;\r\n                }\r\n                case \"texture2D\":\r\n                    finalString = `vec4(0.0f,0.0f,0.0f,0.0f)`\r\n                    break;\r\n                \r\n                default:\r\n                    console.log(\"Unhandled final type \"+code.type);\r\n                    console.log(code);\r\n                    break;\r\n            }\r\n        }else if(typeof code==\"string\"){\r\n            finalString = `vec4(${code})`;\r\n        }else if(typeof code==\"number\"){\r\n            finalString = `vec4(vec3(${float2PointString(code)}),1.0f)`;\r\n        }else{\r\n            console.log(\"Unhandled final result\")\r\n            finalString = `vec4(0.0f,0.0f,0.0f,0.0f)`;\r\n            console.log(code);\r\n        }\r\n        this.fragShaderText = this._genFragShader(finalString);\r\n        this.vertShaderText = this._genVertShader();\r\n        this.newMaterial = this.makeShaders();\r\n    }\r\n\r\n    _generateUniformHeader(uniform){\r\n        return \"uniform float time;\\n\" //TODO: add custom support!\r\n    }\r\n\r\n    _genenrateBufferInput(mesh,attrType=\"varying\",attrSuffix=\"\",useIgnore=null){\r\n        let s=\"\"\r\n        const attrs = mesh.geometry.attributes;\r\n\r\n        for(const k in attrs){\r\n            if(useIgnore){\r\n                if(useIgnore.has(k)){\r\n                    continue;//ignore\r\n                }\r\n            }\r\n            const v = attrs[k];\r\n            const typeName = extractMeshBufferType(v);\r\n            if(typeName){\r\n                s+=`${attrType} ${typeName} ${k}${attrSuffix};\\n`\r\n            }else{\r\n                console.log(\"Unknown type for buffer, ignore\");\r\n            }\r\n        }\r\n        return s;\r\n    }\r\n\r\n    _generateFragShaderHeader(mesh){\r\n        let s = this._generateUniformHeader();\r\n        console.log(\"gen mat\");\r\n        console.log(mesh);\r\n        console.log(mesh.material);\r\n        const texture = mesh.material.map;\r\n        if(texture | true){\r\n            s+= \"uniform sampler2D ourTexture;\\n\";\r\n        }\r\n        s+=this._genenrateBufferInput(mesh,\"varying\",SUFFIX);\r\n        return s;\r\n        \r\n    }\r\n\r\n}\r\n\r\nexport default MaterialBuilder;\r\nexport {SUFFIX}","import { render } from \"./PreviewBox.vue?vue&type=template&id=36c3bdb3&scoped=true\"\nimport script from \"./PreviewBox.vue?vue&type=script&lang=js\"\nexport * from \"./PreviewBox.vue?vue&type=script&lang=js\"\n\nimport \"./PreviewBox.vue?vue&type=style&index=0&id=36c3bdb3&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-36c3bdb3\"]])\n\nexport default __exports__","import * as THREE from \"three\"\r\nimport { Color, MeshLambertMaterial } from \"three\";\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\n//TODO:!!!\r\n/*\r\nTHREE.Mesh.prototype.clone = function ( object ) {\r\n\r\n    if ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\r\n\r\n    THREE.Object3D.prototype.clone.call( this, object );\r\n\r\n    return object;\r\n\r\n};*/\r\n\r\nclass ModelStore{\r\n\r\n    constructor(){\r\n        this.meshes = {};\r\n        this.textureMaterialMap = {};\r\n        this.objects = [];\r\n        this.meshToTexture = new Map();\r\n    }\r\n\r\n    //return a new object with shallow copy\r\n    roughClone(){\r\n        let ms = new ModelStore();\r\n        //ms.meshes = this.meshes;\r\n        ms.objects = [];\r\n        //ms.textureMaterialMap = this.textureMaterialMap;\r\n        for(let obj of this.objects){\r\n            ms.processGroup(obj.clone());\r\n            //ms.objects.push(obj.clone());\r\n        }\r\n        console.log(\"clone!!!\")\r\n        console.log(this)\r\n        console.log(ms);\r\n        return ms;\r\n    }\r\n/*\r\n    _roughCloneInner(obj){\r\n        if(obj.type == \"Mesh\"){\r\n            let r = obj.copy();\r\n        }else if(subobj.type == \"Group\"){\r\n            for(let i=0;i<subobj.children.length;i++){\r\n                let v =subobj.children[i];\r\n                delete v;\r\n                subobj.children[i] = this._roughCloneInner(obj);\r\n            }\r\n        }\r\n    }*/\r\n\r\n    processGroup(object,layer=0){\r\n        if(!object){\r\n            return;\r\n        }\r\n        console.log(object)\r\n        const subobjs = object.children;\r\n        for(const subobj of subobjs){\r\n            if(subobj.type == \"Mesh\"){\r\n                this.meshes[subobj.uuid] = subobj\r\n                const orgmat = subobj.material;\r\n                if(orgmat.map){\r\n                    this.meshToTexture.set(subobj,orgmat.map);\r\n                    if(!this.textureMaterialMap[orgmat.map.uuid]){\r\n                        this.textureMaterialMap[orgmat.map.uuid] = {\r\n                            \"relatedMesh\":[subobj],\r\n                            \"texture\":orgmat.map\r\n                        }\r\n                    }else{\r\n                        let tmmap=this.textureMaterialMap[orgmat.map.uuid];\r\n                        tmmap.relatedMesh.push(subobj);\r\n                        \r\n                    }\r\n                }\r\n                if(orgmat.type == \"MeshPhongMaterial\"){\r\n                    //trying to resolve black texture issue\r\n                    //console.log(\"Phone!!!!\")\r\n                    //subobj.material.emissive=subobj.material.color;\r\n                    //subobj.material.emissiveIntensity=1;\r\n                    //subobj.material.emissiveMap=subobj.material.map;\r\n                }\r\n                //TODO: Other types of material\r\n            }else if(subobj.type == \"AmbientLight\"){\r\n                //subobj.color = new Color(255,255,255);\r\n                subobj.visible=false; //turn off the whole ambient light\r\n                //TODO: parse this\r\n            }else if(subobj.type == \"Group\"){\r\n                this.processGroup(subobj,layer+1);\r\n            }else if(subobj.type == \"Object3D\"){\r\n                this.processGroup(subobj,layer+1);\r\n            }\r\n        }\r\n        if(layer==0){\r\n            this.objects.push(object)\r\n        }\r\n        console.log(this.objects);\r\n        console.log(this.textureMaterialMap)\r\n    }\r\n\r\n    load(path,onComplete=null){\r\n        let manager = new THREE.LoadingManager()\r\n        if(onComplete){\r\n            manager.onLoad = onComplete;\r\n        }\r\n        const fbxLoader = new GLTFLoader(manager)\r\n        fbxLoader.load(\r\n            path,\r\n            (obj)=>{this.processGroup(obj.scene)},\r\n            (xhr) => {\r\n                console.log((xhr.loaded / xhr.total) * 100 + '% loaded')\r\n            },\r\n            (error) => {\r\n                console.log(error)\r\n            }\r\n        )\r\n    }\r\n\r\n    get sampleMesh(){\r\n        for(const i of Object.values(this.meshes)){\r\n            return i;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    //set all model with the specific material\r\n    applyMaterialToAll(mat){\r\n        let tempSet = new Set();\r\n        console.log(this.meshes)\r\n        console.log(mat);\r\n        for(let mesh of Object.values(this.meshes)){\r\n            let material = mat.clone();\r\n            ////material.map = mesh.material.map;\r\n            const map = this.meshToTexture.get(mesh);\r\n            material.uniforms.ourTexture.value = map\r\n            material.uniforms.uniformsNeedUpdate = true\r\n            mesh.material = material;\r\n        }\r\n        /*\r\n        if(this.meshes){\r\n            return;\r\n        }\r\n        for(let mesh of Object.values(this.meshes)){\r\n            //mesh.material = mat;\r\n            let texture=mesh.material.map;\r\n            if(texture && !(tempSet.has(texture.uuid))){ //retain the texture settings\r\n                let newmat = mat.clone();\r\n                newmat.map = texture;\r\n                //let testMat = new MeshLambertMaterial();\r\n                //testMat.emissive = new Color(0.1,0.2,0.9);\r\n                //testMat.emissiveIntensity=1.0;\r\n                let textMesh = this.textureMaterialMap[texture.uuid];\r\n                for(let rmesh of textMesh.relatedMesh){\r\n                    rmesh.material = newmat;\r\n                    console.log(rmesh);\r\n                }\r\n                newmat.needsUpdate=true;\r\n                tempSet.add(texture.uuid);\r\n            }\r\n        }\r\n        console.log(\"final r\",this)*/\r\n    }\r\n\r\n}\r\n\r\nexport default ModelStore;","<template>\r\n  <input step=0.1\r\n    type=\"number\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n</template>\r\n<script>\r\nimport {Variable} from \"../node/compile/DataDefine.js\"\r\nexport default {\r\n  name: \"VueNumControl\",\r\n  props: [\"readonly\", \"emitter\", \"ikey\", \"getData\", \"putData\"],\r\n  data() {\r\n    return {\r\n      value: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    change(e) {\r\n      this.value = e.target.value;\r\n      //this.update();\r\n    },\r\n    update() {\r\n      let n = parseFloat(this.value);\r\n      if(!n){\r\n        n=0;\r\n      }\r\n      if (this.ikey) this.putData(this.ikey, new Variable('float',n)); // use putData to transfer data from ui to node graph\r\n      this.emitter.trigger(\"process\"); // let the program compute the result of node graph\r\n    },\r\n  },\r\n  mounted() {\r\n    this.value = this.getData(this.ikey);\r\n    if(!this.value){\r\n      this.value = 0;\r\n      this.putData(this.ikey, new Variable('float',0));\r\n    }else{\r\n      this.putData(this.ikey, new Variable('float',this.value));\r\n    }\r\n  },\r\n  watch:{\r\n    value:{\r\n      handler(newv,oldv){\r\n        this.update();\r\n      },\r\n      immediate:true\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n","import { render } from \"./VueNumControl.vue?vue&type=template&id=0506f353\"\nimport script from \"./VueNumControl.vue?vue&type=script&lang=js\"\nexport * from \"./VueNumControl.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport VueNumControl from \"../../components/VueNumControl\"\r\nclass NumControl extends Rete.Control {\r\n\r\n  constructor(emitter, key, readonly) {\r\n    super(key);\r\n    this.component = VueNumControl;\r\n    this.props = { emitter, ikey: key, readonly };\r\n  }\r\n\r\n  setValue(val) {\r\n    console.log(\"set val\",val)\r\n    this.vueContext.value = val;\r\n  }\r\n}\r\n\r\nexport default NumControl;","import { Types } from \"./DataDefine\";\r\nimport { float2PointString } from \"../utility/utility\";\r\nimport Rete from \"rete\";\r\nfunction defineTypes(){\r\n    Types.define(\"any\")\r\n    Types.define(\"null\")\r\n    Types.define(\"float\",(v)=>{return float2PointString(v)});\r\n    Types.define(\"int\")\r\n    Types.define(\"texture2D\")\r\n    Types.define(\"vec2\",(v)=>{return `vec2(${float2PointString(v[0])},${float2PointString(v[1])})`})\r\n    Types.define(\"vec3\",(v)=>{return `vec3(${float2PointString(v[0])},${float2PointString(v[1])},${float2PointString(v[2])})`})\r\n    Types.define(\"vec4\",(v)=>{return `vec4(${float2PointString(v[0])},${float2PointString(v[1])},${float2PointString(v[2])},${float2PointString(v[3])})`})\r\n    //TODO: resolve #input#\r\n    Types.defineImplicit(\"float\",\"int\",(v)=>{return v.toFixed(0)},\"int(#input#)\");\r\n    Types.defineImplicit(\"int\",\"float\",(v)=>{return v+0.0},\"float(#input#)\");\r\n    Types.defineImplicit(\"float\",\"vec2\",(v)=>{return [v,v]},\"vec2(#input#)\");\r\n    //Types.defineImplicit(\"float\",\"vec3\",(v)=>{return [v,v,v]},\"vec3(#input#)\");\r\n    //Types.defineImplicit(\"float\",\"vec4\",(v)=>{return [v,v,v,v]},\"vec4(#input#)\");\r\n    //Types.defineImplicit(\"vec2\",\"vec3\",(v)=>{return [v[0],v[1],0]},\"vec3(#input#.x,#input#.y,0)\");\r\n    //Types.defineImplicit(\"vec2\",\"vec4\",(v)=>{return [v[0],v[1],0,0]},\"vec4(#input#.xy,0,0)\");\r\n    //Types.defineImplicit(\"vec3\",\"vec4\",(v)=>{return [v[0],v[1],v[2],0]},\"vec4(#input#.xyz,0)\");\r\n}\r\n\r\nfunction postProcess(){\r\n    console.log(Types);\r\n\r\n    for(let k in Types.members){\r\n        Types.members[k].reteSocket = new Rete.Socket(k);\r\n    }\r\n\r\n    for(let k in Types.members){\r\n        let v = Types.members[k];\r\n        let ls = v.implicitTransform;\r\n        for(let i in ls){\r\n            //v.reteSocket.combineWith(Types.members[i].reteSocket)\r\n            Types.members[i].reteSocket.combineWith(v.reteSocket);\r\n        }\r\n        v.reteSocket.combineWith(Types.members[\"any\"].reteSocket)\r\n    }   \r\n}\r\n\r\nfunction getSocket(name){\r\n    const v = Types.members[name];\r\n    if(v){\r\n        return v.reteSocket;\r\n    }else{\r\n        console.log(\"Unknown Socket Type > \"+name)\r\n        asd\r\n        return null;\r\n    }\r\n}\r\n\r\ndefineTypes();\r\npostProcess();\r\n\r\nexport {getSocket};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","<template>\r\n  <div v-bind:class=\"this.nodeClass\" v-bind:style=\"this.node.styleInfo.nodeStyle.styleInfo.value\">\r\n  <div class=\"title\">{{node.name}}</div>\r\n  <div class=\"content\">\r\n    <div class=\"col\" v-if=\"node.controls.size&gt;0 || node.inputs.size&gt;0\">\r\n      <div class=\"input\" v-for=\"input in inputs()\" :key=\"input.key\" style=\"text-align: left\">\r\n        <Socket v-socket:input=\"input\" type=\"input\" :socket=\"input.socket\" :used=\"() => input.connections.length\" \r\n          :socket-style-info=\"this.node.styleInfo.socketsStyle.get(input)\"\r\n          :socket-dynamic-info=\"this.getSocketDynamicInfoString(input)\"\r\n          ></Socket>\r\n        <div class=\"input-title\" v-show=\"!input.showControl()\">{{input.name}}</div>\r\n        <div v-show=\"input.showControl()\" v-control=\"input.control\"\r\n          :class=\"'input-control '+this.getControlClass(input.control)\"\r\n          :style=\"this.getControlStyle(input.control)\"\r\n        ></div>\r\n     </div>\r\n     <div v-for=\"control in controls()\" v-control=\"control\" :key=\"control\" \r\n     :class=\"'control '+this.getControlClass(control)\"\r\n     :style=\"this.getControlStyle(control)\"></div>\r\n    </div>\r\n    <div class=\"col\">\r\n      <div class=\"output\" v-for=\"output in outputs()\" :key=\"output.key\" style=\"text-align: right\">\r\n        <div class=\"output-title\">{{output.name}}</div>\r\n        <Socket v-socket:output=\"output\" type=\"output\" :socket=\"output.socket\" :used=\"() => output.connections.length\"\r\n          :socket-style-info=\"this.node.styleInfo.socketsStyle.get(output)\"\r\n          :socket-dynamic-info=\"this.getSocketDynamicInfoString(output)\"></Socket>\r\n      </div>\r\n    </div>\r\n  </div> \r\n\r\n  <p \r\n  class=\"error-info\" \r\n  style=\"display:inline-block;width:200px;\"\r\n  v-if=\"this.node.errorInfo_.value!=''\"\r\n  >\r\n    {{this.node.errorInfo_.value}}\r\n    </p>\r\n\r\n</div>\r\n</template>\r\n<script>\r\nimport {kebabize} from './../node/utility/utility'\r\nimport CustomSocket from './CustomSocket.vue'\r\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\r\nconsole.log(VueRenderPlugin.mixin);\r\nexport default{\r\n    name:\"CustomNode\",\r\n    mixins: [VueRenderPlugin.Node],\r\n    methods:{\r\n      used(io){\r\n        return io.connections.length;\r\n      },\r\n      getControlClass(control){\r\n        if(!control){\r\n          return ''\r\n        }\r\n        return this.node.styleInfo.getControl(control).classInfo.value;\r\n      },\r\n      getControlStyle(control){\r\n        if(!control){\r\n          return ''\r\n        }\r\n        return this.node.styleInfo.getControl(control).styleInfo.value;\r\n      },\r\n      getSocketDynamicInfoString(socket){\r\n        \r\n        let st = \"\"+socket.socket.name\r\n        let sets = socket.possibleSocketTemp;\r\n        if(!sets){\r\n          sets = socket.possibleSocket;\r\n        }\r\n        if(sets){\r\n          for(let s of sets.values()){\r\n            st+= \" \"+s.name\r\n          }\r\n        }\r\n        return st\r\n      },\r\n      getSocketDynamicInfoList(socket){\r\n        if(socket.possibleSocket){\r\n          let st = []\r\n          for(let s of socket.possibleSocket.values()){\r\n            st.push(s.name)\r\n          }\r\n          return st\r\n        }\r\n        return []\r\n      }\r\n    },\r\n    computed:{\r\n        nodeClass(){\r\n            console.log(`node ${this.selected()} ${kebabize(this.node.name)} `+this.node.styleInfo.nodeStyle.classInfo.value)\r\n            return `node ${this.selected()} ${kebabize(this.node.name)} ${this.node.styleInfo.nodeStyle.classInfo.value}`;\r\n        }\r\n    },\r\n    components: {\r\n      Socket: CustomSocket //VueRenderPlugin.Socket \r\n    }\r\n}\r\n</script>\r\n<style lang=\"sass\" >\r\n@import \"@/assets/css/nodeEditor.sass\"\r\n</style>","<template>\r\n  <div \r\n    :class=\"this.socketClass\"\r\n    :style=\"this.socketStyleInfo.styleInfo.value+this.socketStyleExtra\"\r\n    :title=\"this.socket.name+' '+this.socketDynamicInfo\"></div>\r\n</template>\r\n<script>\r\nimport {kebabize} from './../node/utility/utility'\r\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\r\nexport default{\r\n    name:\"CustomSocket\",\r\n    props: ['type', 'socket','used','socketStyleInfo','socketDynamicInfo'],\r\n    mixins: [VueRenderPlugin.Socket],\r\n    methods:{\r\n    },\r\n    computed:{\r\n        socketClass(){\r\n            return `socket ${kebabize(this.type)} ${kebabize(this.socket.name)} ${this.used()?'used':''} ${this.socketStyleInfo.classInfo.value}`\r\n        },\r\n        socketStyleExtra(){\r\n            let basic = 'background-image: conic-gradient('\r\n            if(this.used()){\r\n                basic = 'background-image: conic-gradient(#ffffff 50%,'\r\n            }\r\n            let v = this.socketDynamicInfo;\r\n            if(v.indexOf('texture2D')!=-1){\r\n                basic+=\"#ff0000,#ff0000,\"\r\n            }\r\n            if(v.indexOf('float')!=-1){\r\n                basic+=\"#7777ff,#7777ff,\"\r\n            }\r\n            if(v.indexOf('vec2')!=-1){\r\n                basic+=\"#00ffff,#00ffff,\"\r\n            }\r\n            if(v.indexOf('vec3')!=-1){\r\n                basic+=\"#ffff00,#ffff00,\"\r\n            }\r\n            if(v.indexOf('vec4')!=-1){\r\n                basic+=\"#77ff00,#77ff00,\"\r\n            }\r\n            /*\r\n            if(v.indexOf('null')!=-1){\r\n                basic+=\",#ffffff\"\r\n            }*/\r\n            basic = basic.substring(0,basic.length-1);\r\n            basic+=\");\"\r\n            console.log(\"style_basic\",basic)\r\n            return basic;\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"sass\" >\r\n@import \"@/assets/css/nodeEditor.sass\"\r\n</style>","import { render } from \"./CustomSocket.vue?vue&type=template&id=0644603a\"\nimport script from \"./CustomSocket.vue?vue&type=script&lang=js\"\nexport * from \"./CustomSocket.vue?vue&type=script&lang=js\"\n\nimport \"./CustomSocket.vue?vue&type=style&index=0&id=0644603a&lang=sass\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CustomNode.vue?vue&type=template&id=7157b3a2\"\nimport script from \"./CustomNode.vue?vue&type=script&lang=js\"\nexport * from \"./CustomNode.vue?vue&type=script&lang=js\"\n\nimport \"./CustomNode.vue?vue&type=style&index=0&id=7157b3a2&lang=sass\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport NumControl from \"./control/NumControl\"\r\nimport EventEmitter from 'events';\r\nimport { Types, Variable } from \"./compile/DataDefine\";\r\nimport { getSocket } from \"./compile/Types\";\r\nimport { textWorker } from \"./compile/Compile\";\r\nimport CustomNode from \"./../components/CustomNode\"\r\nimport {ref} from \"vue\"\r\n\r\nclass StyleManager{\r\n    constructor(classInfo_=\"\",styleInfo_=\"\"){\r\n        this.classInfo=ref(classInfo_),\r\n        this.styleInfo=ref(styleInfo_)\r\n    }\r\n\r\n    addClass(v){\r\n        if(this.classInfo.value.indexOf(v)==-1){\r\n            this.classInfo.value += ` ${v}`\r\n        }\r\n    }\r\n\r\n    removeClass(v){\r\n        this.classInfo.value = this.classInfo.value.replace(` ${v}`,'');\r\n    }\r\n\r\n    addStyle(v){\r\n        this.styleInfo.value += `;${v}`\r\n    }\r\n\r\n    removeStyle(v){\r\n        this.styleInfo.value = this.styleInfo.value.replace(`;${v}`,'');\r\n    }\r\n\r\n\r\n}\r\nfunction makeStyleData(classInfo_=\"\",styleInfo_=\"\"){\r\n    return new StyleManager();\r\n}\r\n\r\nclass NodeStyleData{\r\n    constructor(){\r\n        this.nodeStyle = makeStyleData();\r\n        this.socketsStyle = new Map();\r\n        this.controlsStyle = new Map(); // control changes frequently, so we use string as key\r\n        //this.nodeRef = null;\r\n    }\r\n\r\n    applyNode(node){\r\n        //this.noderef = node;\r\n        for(const s of node.inputs.values()){\r\n            this.addSocket(s)\r\n            this.addControl(s.control)\r\n        }\r\n        for(const s of node.outputs.values()){\r\n            this.addSocket(s)\r\n            this.addControl(s.control)\r\n        }\r\n\r\n        for(const c of node.controls.values()){\r\n            this.addControl(c)\r\n        }\r\n    }\r\n\r\n    genControlID(control){\r\n        return `${control.parent.id}_${control.key}`\r\n    }\r\n\r\n    addControl(control){\r\n        if(!control){\r\n            return;\r\n        }\r\n        const id = this.genControlID(control);\r\n        this.controlsStyle.set(id,makeStyleData())\r\n    }\r\n\r\n    getControl(control){\r\n        return this.controlsStyle.get(this.genControlID(control));\r\n    }\r\n\r\n    addSocket(socket){\r\n        this.socketsStyle.set(socket,makeStyleData())\r\n    }\r\n\r\n    clone(){\r\n        let n = new NodeStyleData();\r\n        //TODO: clone operations\r\n        return n;\r\n    }\r\n\r\n}\r\n\r\n//set up Node function\r\n\r\n// a utility class for faster coding\r\nclass NodeComponent extends Rete.Component {\r\n\r\n    constructor(name) {\r\n        super(name);\r\n        this.eventManager = new EventEmitter();\r\n        this.defaultInput = {};\r\n        this.data.component = CustomNode\r\n    }\r\n\r\n    _getSocket(name){\r\n        return getSocket(name);\r\n    }\r\n\r\n    _addInput(node,key,text,socketType = \"any\"){\r\n        let p = new DynamicInput(key,text,getSocket(socketType));\r\n        node.addInput(p);\r\n        return p;\r\n    }\r\n\r\n    _addNumSocketInput(node,key,text,socketType=\"float\", controlType=NumControl,possibleSocket=null, defaultInput = null){\r\n        let p =new DynamicInput(key,text,getSocket(socketType));\r\n        p.addControl(new controlType(this.editor, key))\r\n        this.defaultInput[key]=defaultInput;\r\n        if(possibleSocket){\r\n            p.possibleSocket = possibleSocket;\r\n        }\r\n        node.addInput(p);\r\n        return p;\r\n    }\r\n\r\n    _addNumSocketOutput(node,key,text,socketType=\"float\",possibleSocket=null){\r\n        let p = new DynamicOutput(key,text,getSocket(socketType));\r\n        if(possibleSocket){\r\n            p.possibleSocket=possibleSocket;\r\n        }\r\n        node.addOutput(p);\r\n        return p\r\n    }\r\n\r\n\r\n    _textWorker(inputs,grammar){\r\n        return textWorker(inputs,grammar)\r\n    }\r\n\r\n    // extract input from raw inputs\r\n    // if input is undefined, then use the data in node.data\r\n    // otherwise, return an undefined value\r\n    _extractInput(node,inputs){\r\n        let input2 = {}\r\n        for(let i in inputs){\r\n            input2[i] = this.extractInputKey(node,inputs,i);\r\n        }\r\n        return input2;\r\n    }\r\n\r\n    extractInputKey(node,inputs,key){\r\n        if(inputs[key].length){ // is array (input from other node)\r\n            return inputs[key][0]\r\n        }else{ // no connection, but control input\r\n            let t =node.data[key];\r\n            if(!t){ // no control input and connection, use default value\r\n                t = this.defaultInput[key];\r\n                if(!this.defaultInput[key]){\r\n                    console.warn(\"Unknown key in _extractInput: \"+key);\r\n                    console.log(node);\r\n                    return null\r\n                }\r\n            }\r\n            return t;\r\n        }\r\n    }\r\n\r\n    addWorkEvent(func){\r\n        this.eventManager.on(\"work\",func);\r\n    }\r\n\r\n    removeWorkEvent(func){\r\n        this.eventManager.removeListener(\"work\",func);\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        this.eventManager.emit(\"work\",node, inputs, outputs);\r\n        \r\n        //TODO: worker.work, implement in the Node Listeners\r\n\r\n    }\r\n\r\n    async builder(node){\r\n        return node;\r\n    }\r\n\r\n    //completely cover the parent method\r\n    async createNode(data={}){\r\n        let result = new NodeCustomize(this.name);\r\n        result.data=data;\r\n        await this.build(result);\r\n        result.styleInfo.applyNode(result);\r\n        return result\r\n    }\r\n\r\n    setErrorInfo(node,info){\r\n        this.editor.nodes.find(n => n.id == node.id).errorInfo = info;\r\n    }\r\n    \r\n    clearErrorInfo(node){\r\n        this.setErrorInfo(node,\"\")\r\n    }\r\n\r\n    getRealNode(node){\r\n        return this.editor.nodes.find(n => n.id == node.id)\r\n    }\r\n}\r\n/*\r\nRete.IO.prototype.setSocket = function(socket){\r\n    if(this.socket==socket){\r\n        return;\r\n    }\r\n    for(let c of this.connections){\r\n\r\n    }\r\n}*/\r\n\r\nclass DynamicInput extends Rete.Input{\r\n    constructor(key, title, socket, multiConns = false) {\r\n        super(key, title, socket, multiConns);\r\n        this.hide = false;\r\n        this.alwaysShowName = false;\r\n        this.possibleSocket = new Set(); // a list of possible socket type\r\n        this.possibleSocketTemp = new Set(); // a list of possible socket type\r\n    }\r\n\r\n    setSocket(socket){\r\n        if(this.socket==socket){\r\n            return;\r\n        }\r\n        if(typeof socket==\"string\"){\r\n            socket = getSocket(socket);\r\n        }else if(socket==null){\r\n            socket = getSocket('null')\r\n        }\r\n        this.socket = socket;\r\n    }\r\n\r\n    checkConnection(connection){\r\n        return true;\r\n    }\r\n\r\n    showControl(){\r\n        return (super.showControl() && !this.hide) && !this.alwaysShowName\r\n    }\r\n}\r\n\r\nclass DynamicOutput extends Rete.Output{\r\n    constructor(key, title, socket, multiConns = true) {\r\n        super(key, title, socket, multiConns);\r\n        this.hide = false;\r\n        this.alwaysShowName = false;\r\n        this.possibleSocket = new Set(); // a list of possible socket type, \r\n        this.possibleSocketTemp = new Set(); \r\n    }\r\n\r\n    setSocket(socket){\r\n        if(this.socket==socket){\r\n            return;\r\n        }\r\n        if(typeof socket==\"string\"){\r\n            socket = getSocket(socket);\r\n        }else if(socket==null){\r\n            socket = getSocket('null')\r\n        }\r\n        this.socket = socket;\r\n    }\r\n\r\n\r\n    connectTo(input) {\r\n        console.log(\"Try connection\",input,this)\r\n        if (!input.multipleConnections && input.hasConnection())\r\n            throw new Error('Input already has one connection');\r\n        if (!this.multipleConnections && this.hasConnection())\r\n            throw new Error('Output already has one connection');\r\n        \r\n        let flag = false;\r\n        for(let thisSocket of this.possibleSocket.values()){\r\n            for(let inputSocket of input.possibleSocket.values()){\r\n                if(thisSocket.compatibleWith(inputSocket)){\r\n                    flag=true;\r\n                    break;\r\n                }\r\n            }\r\n            if(flag){\r\n                break;\r\n            }\r\n        }\r\n        if(!flag){\r\n            for(let inputSocket of input.possibleSocket.values()){\r\n                if(this.socket.compatibleWith(inputSocket)){\r\n                    flag=true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if(!flag){\r\n            \r\n            for(let thisSocket of this.possibleSocket.values()){\r\n                if(thisSocket.compatibleWith(input.socket)){\r\n                    flag=true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!flag && !this.socket.compatibleWith(input.socket)){\r\n            throw new Error('Sockets not compatible');\r\n        }\r\n\r\n        const connection = new Rete.Connection(this, input);\r\n\r\n        this.connections.push(connection);\r\n        return connection;\r\n    }\r\n\r\n    checkConnection(connection){\r\n        const input = connection.input\r\n        const _this = connection.output\r\n        //if (!input.multipleConnections && input.hasConnection())\r\n        //    return false;\r\n        //if (!this.multipleConnections && this.hasConnection())\r\n        //return false;\r\n        \r\n        for(let thisSocket of _this.possibleSocket.values()){\r\n            for(let inputSocket of input.possibleSocket.values()){\r\n                if(thisSocket.compatibleWith(inputSocket)){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        \r\n        for(let inputSocket of input.possibleSocket.values()){\r\n            if(_this.socket.compatibleWith(inputSocket)){\r\n                return true;\r\n            }\r\n        }\r\n        for(let thisSocket of _this.possibleSocket.values()){\r\n            if(thisSocket.compatibleWith(input.socket)){\r\n                return true;\r\n            }\r\n        }\r\n        if (!_this.socket.compatibleWith(input.socket)){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    showControl(){\r\n        return (super.showControl() && !this.hide) && !this.alwaysShowName\r\n    }\r\n}\r\n/*\r\nfunction installMethod(classType){\r\n    classType.prototype.setSocket = function(socket){\r\n        \r\n    }\r\n}*/\r\n\r\nclass NodeCustomize extends Rete.Node{\r\n\r\n    constructor(name){\r\n        super(name);\r\n        this.styleInfo = new NodeStyleData();\r\n        this.errorInfo_ = ref('')\r\n    }\r\n\r\n    set errorInfo(x){\r\n        this.errorInfo_.value=x\r\n    }\r\n\r\n    set nodeStyle(s){\r\n        this.styleInfo.nodeStyle.styleInfo.value = s\r\n    }\r\n\r\n    set nodeClass(s){\r\n        this.styleInfo.nodeStyle.classInfo.value = s\r\n    }\r\n\r\n    setSocketStyle(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).styleInfo.value = s;\r\n    }\r\n\r\n    setSocketClass(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).styleClass.value = s;\r\n    }\r\n\r\n    addNodeStyle(s){\r\n        this.styleInfo.nodeStyle.addStyle(s);\r\n    }\r\n\r\n    removeNodeStyle(s){\r\n        this.styleInfo.nodeStyle.removeStyle(s);\r\n    }\r\n\r\n    addNodeClass(s){\r\n        this.styleInfo.nodeStyle.addClass(s);\r\n    }\r\n\r\n    removeNodeClass(s){\r\n        this.styleInfo.nodeStyle.removeClass(s);\r\n    }\r\n\r\n\r\n    addSocketClass(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).addClass(s);\r\n    }\r\n\r\n    removeSocketClass(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).removeClass(s);\r\n    }\r\n\r\n    addSocketStyle(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).addStyle(s);\r\n    }\r\n\r\n    removeSocketStyle(socket,s){\r\n        this.styleInfo.socketsStyle.get(socket).removeStyle(s);\r\n    }\r\n\r\n\r\n    addControlClass(control,s){\r\n        this.styleInfo.getControl(control).addClass(s);\r\n    }\r\n\r\n    removeControlClass(control,s){\r\n        this.styleInfo.getControl(control).removeClass(s);\r\n    }\r\n\r\n    addControlStyle(control,s){\r\n        this.styleInfo.getControl(control).addStyle(s);\r\n    }\r\n\r\n    removeControlStyle(control,s){\r\n        this.styleInfo.getControl(control).removeStyle(s);\r\n    }\r\n    /*\r\n    addSocketsClass(s){\r\n        for(let socket of this.styleInfo.socketsStyle.values()){\r\n            socket.addClass(s)\r\n        }\r\n    }*/\r\n\r\n    // set data and reflect it on the control\r\n    // key: string, v: Variable\r\n    setData(key,v){\r\n        this.data[key] = v;\r\n        let control = this.getControl(key);\r\n        if(control){\r\n            const vv = v instanceof Variable?v.value:v;\r\n            control.setValue(vv);\r\n        }\r\n    }\r\n\r\n    getControl(key){\r\n        if(this.controls.has(key)){\r\n            return this.controls.get(key)\r\n        }else if(this.inputs.has(key)){\r\n            return this.inputs.get(key).control\r\n        }\r\n        return null\r\n    }\r\n\r\n    getData(key){\r\n        return this.data[key];\r\n    }\r\n\r\n}\r\n\r\nexport default NodeComponent;\r\n\r\nexport{\r\n    NodeCustomize,\r\n    NodeStyleData,\r\n    StyleManager\r\n}\r\n","import \"@babel/polyfill\";\r\nimport Rete, { Socket } from \"rete\";\r\nimport PreviewBox from \"./../../components/PreviewBox.vue\";\r\nimport { createApp,reactive,ref, watch } from 'vue';\r\nimport { Variable } from \"../compile/DataDefine\";\r\nimport ModelStore from \"../utility/ModelStore\";\r\nimport {NodeCustomize} from \"../NodeComponent\"\r\n// a class for preview box\r\nclass PreviewBoxComponent extends Rete.Component {\r\n\r\n    constructor(){\r\n        super(\"PreviewBox\")\r\n        //this.data.component = PreviewBox\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n    }\r\n\r\n    builder(node){\r\n        return node;\r\n    }\r\n\r\n    createNode(data){\r\n        let result = new PreviewBoxNode(this.editor);\r\n        result.data=data;\r\n        return result\r\n    }\r\n\r\n}\r\nclass PreviewBoxNode extends NodeCustomize{\r\n\r\n    constructor(width = PreviewBoxNode.defaultWidth,height = PreviewBoxNode.defaultHeight){\r\n        super(\"PreviewBox\");\r\n        this.vueContext = null;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.templateData = null;\r\n        this._variable = reactive(new Variable(\"float\",0));\r\n        this._state = ref(\"unlock\")\r\n        this._applyFunc = reactive({func:()=>{},func2:()=>{}});\r\n    }\r\n\r\n    // we use this method to create a node\r\n    createVueComp(el){\r\n        console.log(\"mount!\")\r\n        console.log(this.data)\r\n        if(!this.data.modelStore){\r\n            this.data.modelStore = new ModelStore();\r\n        }\r\n        let app= createApp(PreviewBox, {modelStore:this.data.modelStore,\r\n            variable:this._variable,nodeStyle:this.styleInfo,\r\n            state:this._state,\r\n            setState:(v)=>{this.state=v},\r\n            apply:this._applyFunc\r\n        });\r\n        app.mount(el)\r\n        this.el=el;\r\n    }\r\n\r\n    set applyFunc(f){\r\n        this._applyFunc.func=f;\r\n    }\r\n\r\n    set applyFunc2(f){\r\n        this._applyFunc.func2=f;\r\n    }\r\n\r\n    set variable(v){\r\n        Object.assign(this._variable,v);\r\n    }\r\n\r\n    set state(v){\r\n        this._state.value = v;\r\n    }\r\n\r\n    get state(){\r\n        return this._state.value;\r\n    }\r\n    \r\n    setPosition(editor,pos){\r\n        this.position=pos;\r\n        const v = editor.view.nodes.get(this);\r\n        if(v){\r\n            v.translate(pos[0],pos[1]);\r\n\r\n        }\r\n    }\r\n\r\n}\r\nPreviewBoxNode.defaultWidth=100;\r\nPreviewBoxNode.defaultHeight=100;\r\n\r\nfunction install(editor) {\r\n    editor.on(\r\n        'rendernode',\r\n        ({ el, node, component, bindSocket, bindControl }) => {\r\n            if (component.render && component.render !== 'vue') return;\r\n            console.log({ el, node, component, bindSocket, bindControl })\r\n            if (node.name == \"PreviewBox\"){\r\n                node.createVueComp(el); // replaced the view\r\n            }\r\n        }\r\n    );\r\n}\r\n\r\nexport default {\r\n    name: 'preview-box',\r\n    install\r\n};\r\n\r\nexport {\r\n    PreviewBoxComponent,PreviewBoxNode\r\n}","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport NumControl from \"../control/NumControl\"\r\nimport NodeComponent from \"../NodeComponent\";\r\nimport { Variable } from \"../compile/DataDefine\";\r\nimport { string2Float } from \"../utility/utility\";\r\n\r\nclass NumComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Number\");\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addNumSocketOutput(node,'num', \"Number\")\r\n        const control = new NumControl(this.editor, 'num');\r\n        node.addControl(control);\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['num'] = node.data.num;\r\n        console.log(\"Output num\")\r\n        console.log(node.data.num)\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default NumComponent;","import { Method } from \"./DataDefine\";\r\nimport { textWorker } from \"./Compile\";\r\nclass MethodTemplate{\r\n    constructor(name,inputs,outputType,func,grammar,templateVar){\r\n        this.name = name;\r\n        this.inputs = inputs; // dictionary of types\r\n        this.outputType = outputType; // output type\r\n        this.func = func;\r\n        this.grammar = grammar;\r\n        this.templateVar = templateVar\r\n    }\r\n\r\n    specialize(vars){\r\n        //let method = new Method()\r\n        let inputs={};\r\n        for(let i in this.inputs){\r\n            inputs[i] = textWorker(vars,this.inputs[i])\r\n        }\r\n        let outputType = textWorker(vars,this.outputType)\r\n        let grammar = textWorker(vars,this.grammar);\r\n        return new Method(this.name,inputs,outputType,this.func,grammar);\r\n    }\r\n\r\n    \r\n}\r\n\r\nfunction generateOperationMethod(name,singleOp,singleOpText){\r\n    const acceptType=[\r\n        \"float\",\"vec2\",\"vec3\",\"vec4\"\r\n    ]\r\n    const grammar = \"#UPTYPE1#(#num#)\"+singleOpText+\"#UPTYPE2#(#num2#)\";\r\n    let template = new MethodTemplate(\r\n        name,\r\n        {\"num\":\"#IT1#\",\"num2\":\"#IT2#\"},\r\n        \"#IT3#\",\r\n        (a,b)=>{\r\n            //console.log(a)\r\n            //console.log(b)\r\n            if(a.length && b.length){\r\n                let r = []\r\n                for(let i in a){\r\n                    r[i] = singleOp(a[i],b[i])\r\n                }\r\n                return r;\r\n            }\r\n            if(!a.length){\r\n                if(!b.length){\r\n                    return singleOp(a,b)\r\n                }\r\n                let r =[]\r\n                for(let i in b){\r\n                    r[i]=singleOp(a,b[i])\r\n                }\r\n                return r\r\n            }else if (!b.length){\r\n                let r =[]\r\n                for(let i in a){\r\n                    r[i]=singleOp(a[i],b)\r\n                }\r\n                return r\r\n            }\r\n            return singleOp(a,b);\r\n        },\r\n        grammar\r\n    );\r\n\r\n    let methodLists=[]\r\n    for(const tp of acceptType){\r\n        methodLists.push(template.specialize({\"IT1\":tp,\"IT2\":tp,\"IT3\":tp,\"UPTYPE1\":'',\"UPTYPE2\":''}))\r\n    }\r\n\r\n    const acceptTypeComplex=[\r\n        \"vec2\",\"vec3\",\"vec4\"\r\n    ]\r\n    for(const tp of acceptTypeComplex){\r\n        methodLists.push(template.specialize({\"IT1\":tp,\"IT2\":\"float\",\"IT3\":tp,\"UPTYPE1\":'',\"UPTYPE2\":tp}));\r\n        //methodLists.push(template.specialize({\"IT1\":tp,\"IT2\":\"int\",\"IT3\":tp}));\r\n        if(singleOpText!='/'){\r\n            methodLists.push(template.specialize({\"IT1\":\"float\",\"IT2\":tp,\"IT3\":tp,\"UPTYPE1\":tp,\"UPTYPE2\":''}));\r\n            //methodLists.push(template.specialize({\"IT1\":\"int\",\"IT2\":tp,\"IT3\":tp}));\r\n        }\r\n    }\r\n    return methodLists;\r\n}\r\n\r\nfunction defineOpMethods(methods){\r\n    methods[\"add\"] = generateOperationMethod(\"add\",(a,b)=>{return a+b},\"+\");\r\n    methods[\"minus\"] = generateOperationMethod(\"minus\",(a,b)=>{return a-b},\"-\");\r\n    methods[\"mult\"] = generateOperationMethod(\"mult\",(a,b)=>{return a*b},\"*\");\r\n    methods[\"div\"] = generateOperationMethod(\"div\",(a,b)=>{return a/b},\"/\");\r\n}\r\n\r\nconst _fetchIndex2TextList = \"rgba\";\r\nfunction fetchIndex2Text(fetchIndex){\r\n    let s=\"\"\r\n    for(let i of fetchIndex){\r\n        s+=_fetchIndex2TextList[i];\r\n    }\r\n    return s;\r\n}\r\nfunction generateBreakDownMethod(namePrefix,fetchIndex){\r\n    const grammar = \"#v#.#s#\";\r\n    const fetchName = fetchIndex2Text(fetchIndex);\r\n    const name = namePrefix+\"_\"+fetchName;\r\n    let outputType = \"float\"\r\n    if(fetchName.length>1){\r\n        outputType = `vec${fetchName.length}`;\r\n    }\r\n    let template = new MethodTemplate(\r\n        name,\r\n        {\"v\":\"#IT#\"},\r\n        \"#OT#\",\r\n        (v)=>{\r\n            let result = [];\r\n            for (let i of fetchIndex)\r\n            {\r\n                result.push(v[i]);\r\n            }\r\n            if(result.length==1){\r\n                return result[0];\r\n            }\r\n            return result;\r\n        },\r\n        grammar\r\n    );\r\n\r\n    let inputs=[];\r\n    const maxv = Math.max(2,Math.max(...fetchIndex)+1);\r\n    for(let i =4;i>=maxv;i--){\r\n        inputs.push(`vec${i}`);\r\n    }\r\n\r\n    let methodList = [];\r\n    for(let i of inputs){\r\n        methodList.push(template.specialize({\"s\":fetchName,\"IT\":i,\"OT\":outputType}));\r\n    }\r\n    return methodList;\r\n    \r\n}\r\n\r\nfunction genFetchIndexes(fetchIndexes = [], layer=0){\r\n    if(layer<0){\r\n        return fetchIndexes;\r\n    }\r\n    let result=[]\r\n    for(let i=0;i<4;i++){\r\n        for(let f of fetchIndexes){\r\n            result.push(f.concat([i]));\r\n        }\r\n    }\r\n    return genFetchIndexes(result,layer-1);\r\n    \r\n}\r\n\r\nfunction moveArray(froma, toa){\r\n    for(const i of toa){\r\n        froma.push(i)\r\n    }\r\n    return froma;\r\n}\r\n\r\nfunction defineBreakDownMethods(methods_){\r\n    let fetchIndexes = []\r\n    const basicIndexes=[[0],[1],[2],[3]]\r\n    fetchIndexes = moveArray(fetchIndexes,genFetchIndexes(basicIndexes,-1));\r\n    //fetchIndexes = moveArray(fetchIndexes,genFetchIndexes(basicIndexes,0));\r\n    //fetchIndexes = moveArray(fetchIndexes,genFetchIndexes(basicIndexes,1));\r\n    //fetchIndexes = moveArray(fetchIndexes,genFetchIndexes(basicIndexes,2));\r\n    let methods = [];\r\n    for(let i of fetchIndexes){\r\n        methods = moveArray(methods,generateBreakDownMethod(\"extract\",i));\r\n    }\r\n    methods_[\"extract\"] = methods;\r\n}\r\n\r\nfunction defineVariesFunction(methods_){\r\n    let methods = []\r\n    \r\n    methods.push(new Method('numberToVec2',\r\n    {  \r\n        \"r\":\"float\",\r\n        \"g\":\"float\"\r\n    },\"vec2\",\r\n    (r,g)=>{return [r,g]},\r\n    \"vec2(#r#,#g#)\"\r\n    ))\r\n    methods.push(new Method('numberToVec3',\r\n    {  \r\n        \"r\":\"float\",\r\n        \"g\":\"float\",\r\n        \"b\":\"float\"\r\n    },\"vec3\",\r\n    (r,g,b)=>{return [r,g,b]},\r\n    \"vec3(#r#,#g#,#b#)\"\r\n    ))\r\n\r\n    methods.push(new Method('numberToVec4',\r\n    {  \r\n        \"r\":\"float\",\r\n        \"g\":\"float\",\r\n        \"b\":\"float\",\r\n        \"a\":\"float\"\r\n    },\"vec4\",\r\n    (r,g,b,a)=>{return [r,g,b,a]},\r\n    \"vec4(#r#,#g#,#b#,#a#)\"\r\n    ))\r\n/*\r\n    methods.push(new Method('fetchX',\r\n    {  \r\n        \"v\":\"vec2\"\r\n    },\"float\",\r\n    (v)=>{return v[0]},\r\n    \"(#v#.r)\"\r\n    ))\r\n*/\r\n    methods_[\"varying\"] = methods;\r\n}\r\n\r\nfunction dot(a,b){\r\n    let v = 0\r\n    for(let i=0;i<a.length;i++){\r\n        v+=a[i]*b[i]\r\n    }\r\n    return v;\r\n}\r\n\r\nfunction defineDot(methods_){\r\n    let methods = []\r\n    \r\n    methods.push(new Method('dot',\r\n    {  \r\n        \"a\":\"float\",\r\n        \"b\":\"float\"\r\n    },\"float\",\r\n    (a,b)=>{return a*b},\r\n    \"#a#*#b#\"\r\n    ));\r\n\r\n    methods.push(new Method('dot',\r\n    {  \r\n        \"a\":\"vec2\",\r\n        \"b\":\"vec2\"\r\n    },\"float\",\r\n    (a,b)=>{return dot(a,b)},\r\n    \"dot(#a#,#b#)\"\r\n    ));\r\n\r\n    methods.push(new Method('dot',\r\n    {  \r\n        \"a\":\"vec3\",\r\n        \"b\":\"vec3\"\r\n    },\"float\",\r\n    (a,b)=>{return dot(a,b)},\r\n    \"dot(#a#,#b#)\"\r\n    ));\r\n\r\n    methods.push(new Method('dot',\r\n    {  \r\n        \"a\":\"vec4\",\r\n        \"b\":\"vec4\"\r\n    },\"float\",\r\n    (a,b)=>{return dot(a,b)},\r\n    \"dot(#a#,#b#)\"\r\n    ));\r\n    methods_[\"dot\"] = methods\r\n}\r\n\r\nfunction defineStep(methods_){\r\n    let template = new MethodTemplate(\r\n        'setp',\r\n        {\r\n            \"v1\":\"#IT1#\",\r\n            \"v2\":\"#IT2#\"\r\n        },\r\n        \"#OT#\",\r\n        (v1,v2)=>{\r\n            if(!v1.length && !v2.length){\r\n                return v1>v2?1.0:0.0\r\n            }\r\n            let result=[]\r\n            if(v1.length && v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]>v2[i]?1.0:0.0)\r\n                }\r\n            }\r\n            if(!v1.length && v2.length){\r\n                for(let i=0;i<v2.length;i++){\r\n                    result.push(v1>v2[i]?1.0:0.0)\r\n                }\r\n            }\r\n            if(v1.length && !v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]>v2?1.0:0.0)\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        'step(#v1#,#v2#)'\r\n    );\r\n\r\n    const list = ['float','vec2','vec3','vec4'];\r\n    const slist = ['vec2','vec3','vec4'];\r\n    let result = []\r\n    for(let input1 of list){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,\"OT\":input1}))\r\n\r\n    }\r\n    for(let input1 of slist){\r\n        result.push(template.specialize({\"IT1\":'float',\"IT2\":input1,\"OT\":input1}))\r\n    }\r\n    methods_['step'] = result\r\n}\r\n\r\n\r\nfunction defineMix(methods_){\r\n    const interp = function(x,y,v){\r\n        return x*(1-v)+y*v\r\n    }\r\n    let template = new MethodTemplate(\r\n        'mix',\r\n        {\r\n            \"v1\":\"#IT1#\",\r\n            \"v2\":\"#IT2#\",\r\n            \"v3\":\"#IT3#\"\r\n        },\r\n        \"#OT#\",\r\n        (v1,v2,v3)=>{\r\n            if(!v1.length && !v2.length && !v3.length){\r\n                return interp(v1,v2,v3)\r\n            }\r\n            let result=[]\r\n            if(v1.length && v2.length && v3.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(interp(v1[i],v2[i],v3[i]))\r\n                }\r\n            }\r\n            if(v1.length && v2.length && !v3.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(interp(v1[i],v2[i],v3))\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        'mix(#v1#,#v2#,#v3#)'\r\n    );\r\n\r\n    const list = ['float','vec2','vec3','vec4'];\r\n    const slist = ['vec2','vec3','vec4'];\r\n    let result = []\r\n    for(let input1 of list){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,'IT3':input1,\"OT\":input1}))\r\n\r\n    }\r\n    for(let input1 of slist){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,'IT3':'float',\"OT\":input1}))\r\n    }\r\n    methods_['mix'] = result\r\n}\r\n\r\n\r\n\r\nfunction defineMax(methods_){\r\n    let template = new MethodTemplate(\r\n        'max',\r\n        {\r\n            \"v1\":\"#IT1#\",\r\n            \"v2\":\"#IT2#\"\r\n        },\r\n        \"#OT#\",\r\n        (v1,v2)=>{\r\n            if(!v1.length && !v2.length){\r\n                return v1>v2?v1:v2\r\n            }\r\n            let result=[]\r\n            if(v1.length && v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]>v2[i]?v1[i]:v2[i])\r\n                }\r\n            }\r\n            if(!v1.length && v2.length){\r\n                for(let i=0;i<v2.length;i++){\r\n                    result.push(v1>v2[i]?v1:v2[i])\r\n                }\r\n            }\r\n            if(v1.length && !v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]>v2?v1[i]:v2)\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        'max(#v1#,#v2#)'\r\n    );\r\n\r\n    const list = ['float','vec2','vec3','vec4'];\r\n    const slist = ['vec2','vec3','vec4'];\r\n    let result = []\r\n    for(let input1 of list){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,\"OT\":input1}))\r\n\r\n    }\r\n    for(let input1 of slist){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":'float',\"OT\":input1}))\r\n    }\r\n    methods_['max'] = result\r\n}\r\n\r\n\r\nfunction defineMin(methods_){\r\n    let template = new MethodTemplate(\r\n        'min',\r\n        {\r\n            \"v1\":\"#IT1#\",\r\n            \"v2\":\"#IT2#\"\r\n        },\r\n        \"#OT#\",\r\n        (v1,v2)=>{\r\n            if(!v1.length && !v2.length){\r\n                return v1<v2?v1:v2\r\n            }\r\n            let result=[]\r\n            if(v1.length && v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]<v2[i]?v1[i]:v2[i])\r\n                }\r\n            }\r\n            if(!v1.length && v2.length){\r\n                for(let i=0;i<v2.length;i++){\r\n                    result.push(v1<v2[i]?v1:v2[i])\r\n                }\r\n            }\r\n            if(v1.length && !v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(v1[i]<v2?v1[i]:v2)\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        'min(#v1#,#v2#)'\r\n    );\r\n\r\n    const list = ['float','vec2','vec3','vec4'];\r\n    const slist = ['vec2','vec3','vec4'];\r\n    let result = []\r\n    for(let input1 of list){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,\"OT\":input1}))\r\n\r\n    }\r\n    for(let input1 of slist){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":'float',\"OT\":input1}))\r\n    }\r\n    methods_['min'] = result\r\n}\r\n\r\nfunction defineDirectMapping(\r\n    methods_,\r\n    name,\r\n    func,\r\n    grammarName =null\r\n    ){\r\n        if(!grammarName){\r\n            grammarName=name\r\n        }\r\n    let template = new MethodTemplate(\r\n        name,\r\n        {\r\n            \"v1\":\"#IT1#\",\r\n            \"v2\":\"#IT2#\"\r\n        },\r\n        \"#OT#\",\r\n        (v1,v2)=>{\r\n            if(!v1.length && !v2.length){\r\n                return func(v1,v2);\r\n            }\r\n            let result=[]\r\n            if(v1.length && v2.length){\r\n                for(let i=0;i<v1.length;i++){\r\n                    result.push(func(v1[i],v2[i]))\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        grammarName+'(#v1#,#v2#)'\r\n    );\r\n\r\n    const list = ['float','vec2','vec3','vec4'];\r\n    let result = []\r\n    for(let input1 of list){\r\n        result.push(template.specialize({\"IT1\":input1,\"IT2\":input1,\"OT\":input1}))\r\n\r\n    }\r\n    methods_[name] = result\r\n}\r\n\r\nvar methods= {}\r\ndefineOpMethods(methods)\r\ndefineBreakDownMethods(methods);\r\ndefineVariesFunction(methods);\r\ndefineDot(methods)\r\ndefineStep(methods)\r\ndefineMix(methods)\r\ndefineMax(methods)\r\ndefineMin(methods)\r\ndefineDirectMapping(methods,'pow',(a,b)=>{return Math.pow(a,b)})\r\ndefineDirectMapping(methods,'sin',(a,b)=>{return Math.sin(a,b)})\r\ndefineDirectMapping(methods,'cos',(a,b)=>{return Math.cos(a,b)})\r\ndefineDirectMapping(methods,'tan',(a,b)=>{return Math.tan(a,b)})\r\n\r\nconsole.log(\"FullMethods\",methods);\r\n\r\nexport {methods}","<template>\r\n  <input step=0.1\r\n    ref=\"x\"\r\n    type=\"number\"\r\n    placeholder=\"X\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[0]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"y\"\r\n    type=\"number\"\r\n    placeholder=\"Y\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[1]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n</template>\r\n<script>\r\nimport {Variable} from \"../node/compile/DataDefine.js\"\r\nimport {vecString2Float} from \"./../node/utility/utility\"\r\nimport {toRaw} from \"vue\"\r\nexport default {\r\n  name: \"VueNumControl\",\r\n  props: [\"readonly\", \"emitter\", \"ikey\", \"getData\", \"putData\"],\r\n  data() {\r\n    return {\r\n      value: [0,0],\r\n    };\r\n  },\r\n  methods: {\r\n    change(e) {\r\n      this.value = ([\r\n            this.$refs.x.value,\r\n            this.$refs.y.value\r\n        ]);\r\n      this.update();\r\n    },\r\n    update() {\r\n      let v = vecString2Float([\r\n            this.value[0],\r\n            this.value[1]\r\n        ]);\r\n      if (this.ikey) this.putData(this.ikey, new Variable('vec2',toRaw(v)));\r\n      this.emitter.trigger(\"process\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.value = this.getData(this.ikey);\r\n    if(!this.value){\r\n      this.value = [0,0];\r\n      this.putData(this.ikey, new Variable('vec2',[0,0]));\r\n    }else{\r\n      this.putData(this.ikey, new Variable('vec2',toRaw(this.value)));\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n    input {\r\n        width:50px;\r\n        padding-left: 5px;\r\n        display: inline;\r\n    }\r\n</style>\r\n\r\n","import { render } from \"./VueVec2Control.vue?vue&type=template&id=13a8162a&scoped=true\"\nimport script from \"./VueVec2Control.vue?vue&type=script&lang=js\"\nexport * from \"./VueVec2Control.vue?vue&type=script&lang=js\"\n\nimport \"./VueVec2Control.vue?vue&type=style&index=0&id=13a8162a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-13a8162a\"]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport VueVec2Control from \"../../components/VueVec2Control\"\r\nclass Vec2Control extends Rete.Control {\r\n\r\n  constructor(emitter, key, readonly) {\r\n    super(key);\r\n    this.component = VueVec2Control;\r\n    this.props = { emitter, ikey: key, readonly };\r\n  }\r\n\r\n  setValue(val) {\r\n    this.vueContext.value = val;\r\n  }\r\n}\r\n\r\nexport default Vec2Control;","<template>\r\n  <input step=0.1\r\n    ref=\"x\"\r\n    type=\"number\"\r\n    placeholder=\"X\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[0]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"y\"\r\n    type=\"number\"\r\n    placeholder=\"Y\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[1]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"z\"\r\n    type=\"number\"\r\n    placeholder=\"Z\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[2]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n</template>\r\n<script>\r\nimport {Variable} from \"../node/compile/DataDefine.js\"\r\nimport {vecString2Float} from \"./../node/utility/utility\"\r\nimport {toRaw} from \"vue\"\r\nexport default {\r\n  name: \"VueNumControl\",\r\n  props: [\"readonly\", \"emitter\", \"ikey\", \"getData\", \"putData\"],\r\n  data() {\r\n    return {\r\n      value: [0,0,0],\r\n    };\r\n  },\r\n  methods: {\r\n    change(e) {\r\n      this.value = ([\r\n            this.$refs.x.value,\r\n            this.$refs.y.value,\r\n            this.$refs.z.value\r\n        ]);\r\n      this.update();\r\n    },\r\n    update() {\r\n      let v = vecString2Float([\r\n            this.value[0],\r\n            this.value[1],\r\n            this.value[2]\r\n        ]);\r\n      if (this.ikey) this.putData(this.ikey, new Variable('vec3',toRaw(v)));\r\n      this.emitter.trigger(\"process\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.value = this.getData(this.ikey);\r\n    if(!this.value){\r\n      this.value = [0,0,0];\r\n      this.putData(this.ikey, new Variable('vec3',[0,0,0]));\r\n    }else{\r\n      this.putData(this.ikey, new Variable('vec3',toRaw(this.value)));\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n    input {\r\n        width:50px;\r\n        padding-left: 5px;\r\n        display: inline;\r\n    }\r\n</style>\r\n\r\n","import { render } from \"./VueVec3Control.vue?vue&type=template&id=f682f51e&scoped=true\"\nimport script from \"./VueVec3Control.vue?vue&type=script&lang=js\"\nexport * from \"./VueVec3Control.vue?vue&type=script&lang=js\"\n\nimport \"./VueVec3Control.vue?vue&type=style&index=0&id=f682f51e&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f682f51e\"]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport VueVec3Control from \"../../components/VueVec3Control\"\r\nclass Vec3Control extends Rete.Control {\r\n\r\n  constructor(emitter, key, readonly) {\r\n    super(key);\r\n    this.component = VueVec3Control;\r\n    this.props = { emitter, ikey: key, readonly };\r\n  }\r\n\r\n  setValue(val) {\r\n    this.vueContext.value = val;\r\n  }\r\n}\r\n\r\nexport default Vec3Control;","<template>\r\n  <input step=0.1\r\n    ref=\"x\"\r\n    type=\"number\"\r\n    placeholder=\"X\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[0]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"y\"\r\n    type=\"number\"\r\n    placeholder=\"Y\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[1]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"z\"\r\n    type=\"number\"\r\n    placeholder=\"Z\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[2]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input step=0.1\r\n    ref=\"w\"\r\n    type=\"number\"\r\n    placeholder=\"W\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[3]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n</template>\r\n<script>\r\nimport {Variable} from \"../node/compile/DataDefine.js\"\r\nimport {vecString2Float} from \"./../node/utility/utility\"\r\nimport {toRaw} from \"vue\"\r\nexport default {\r\n  name: \"VueNumControl\",\r\n  props: [\"readonly\", \"emitter\", \"ikey\", \"getData\", \"putData\"],\r\n  data() {\r\n    return {\r\n      value: [0,0,0,0],\r\n    };\r\n  },\r\n  methods: {\r\n    change(e) {\r\n      this.value = ([\r\n            this.$refs.x.value,\r\n            this.$refs.y.value,\r\n            this.$refs.z.value,\r\n            this.$refs.w.value\r\n        ]);\r\n      this.update();\r\n    },\r\n    update() {\r\n      let v = vecString2Float([\r\n            this.value[0],\r\n            this.value[1],\r\n            this.value[2],\r\n            this.value[3]\r\n        ]);\r\n      if (this.ikey) this.putData(this.ikey, new Variable('vec4',toRaw(v)));\r\n      this.emitter.trigger(\"process\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.value = this.getData(this.ikey);\r\n    if(!this.value){\r\n      this.value = [0,0,0,0];\r\n      this.putData(this.ikey, new Variable('vec4',[0,0,0,0]));\r\n    }else{\r\n      this.putData(this.ikey, new Variable('vec4',toRaw(this.value)));\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n    input {\r\n        width:50px;\r\n        padding-left: 5px;\r\n        display: inline;\r\n    }\r\n</style>\r\n\r\n","import { render } from \"./VueVec4Control.vue?vue&type=template&id=49839787&scoped=true\"\nimport script from \"./VueVec4Control.vue?vue&type=script&lang=js\"\nexport * from \"./VueVec4Control.vue?vue&type=script&lang=js\"\n\nimport \"./VueVec4Control.vue?vue&type=style&index=0&id=49839787&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49839787\"]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport VueVec4Control from \"../../components/VueVec4Control\"\r\nclass Vec4Control extends Rete.Control {\r\n\r\n  constructor(emitter, key, readonly) {\r\n    super(key);\r\n    this.component = VueVec4Control;\r\n    this.props = { emitter, ikey: key, readonly };\r\n  }\r\n\r\n  setValue(val) {\r\n    this.vueContext.value = val;\r\n  }\r\n}\r\n\r\nexport default Vec4Control;","<template>\r\n    <div></div>\r\n<!--\r\n  <input\r\n    v-if=\"type.value!='any'\"\r\n    ref=\"x\"\r\n    type=\"number\"\r\n    placeholder=\"X\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value.length?value:value[0]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input\r\n    v-if=\"type.value!='any' && type.value!='float'\"\r\n    ref=\"y\"\r\n    type=\"number\"\r\n    placeholder=\"Y\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[1]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input\r\n  v-if=\"type.value!='any' && type.value!='float' && type.value!='vec2'\"\r\n    ref=\"z\"\r\n    type=\"number\"\r\n    placeholder=\"Z\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[2]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  <input\r\n  v-if=\"type.value!='any' && type.value!='float' && type.value!='vec2' && type.value!='vec3'\"\r\n    ref=\"w\"\r\n    type=\"number\"\r\n    placeholder=\"W\"\r\n    :readonly=\"readonly\"\r\n    :value=\"value[3]\"\r\n    @input=\"change($event)\"\r\n    @dblclick.stop=\"\"\r\n    @pointerdown.stop=\"\"\r\n    @pointermove.stop=\"\"\r\n  />\r\n  -->\r\n</template>\r\n<script>\r\nimport {Variable} from \"../node/compile/DataDefine.js\"\r\nimport {vecString2Float} from \"./../node/utility/utility\"\r\nimport {toRaw} from \"vue\"\r\nexport default {\r\n  name: \"VueNumControl\",\r\n  props: [\"readonly\", \"emitter\", \"ikey\", \"getData\", \"putData\",\"type\"],\r\n  data() {\r\n    return {\r\n      value: 0\r\n    };\r\n  },\r\n  methods: {\r\n    change(e) {\r\n      let value = vecString2Float([\r\n            this.$refs.x.value,\r\n            this.$refs.y.value,\r\n            this.$refs.z.value,\r\n            this.$refs.w.value\r\n        ]);\r\n        let finv=0.0;\r\n      switch(this.type.value){\r\n          case \"float\":\r\n              finv = value[0]\r\n              break;\r\n          case 'vec2':\r\n              finv = [value[0],value[1]]\r\n              break;\r\n          case 'vec3':\r\n              finv = [value[0],value[1],value[2]]\r\n              break;\r\n          case 'vec4':\r\n              finv = [value[0],value[1],value[2],value[3]]\r\n              break;\r\n      }\r\n      this.value = finv;\r\n      //this.update();\r\n    },\r\n    update() {\r\n      //if (this.ikey) this.putData(this.ikey, new Variable(toRaw(this.type),toRaw(this.value)));\r\n     // this.emitter.trigger(\"process\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.value = this.getData(this.ikey);\r\n    if(!this.value){\r\n      this.value = 0;\r\n      //this.putData(this.ikey, new Variable('null','(0.0f)'));\r\n    }else{\r\n      //this.putData(this.ikey, new Variable(toRaw(this.type),toRaw(this.value)));\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n    input {\r\n        width:50px;\r\n        padding-left: 5px;\r\n        display: inline;\r\n    }\r\n</style>\r\n\r\n","import { render } from \"./VueDynamicControl.vue?vue&type=template&id=1d0683ba&scoped=true\"\nimport script from \"./VueDynamicControl.vue?vue&type=script&lang=js\"\nexport * from \"./VueDynamicControl.vue?vue&type=script&lang=js\"\n\nimport \"./VueDynamicControl.vue?vue&type=style&index=0&id=1d0683ba&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d0683ba\"]])\n\nexport default __exports__","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport { reactive, ref } from \"vue\";\r\nimport VueDynamicControl from \"../../components/VueDynamicControl\"\r\nclass DynamicControl extends Rete.Control {\r\n\r\n  constructor(emitter, key, readonly) {\r\n    super(key);\r\n    this.component = VueDynamicControl;\r\n    this._types = reactive(new Set())\r\n    this.props = { emitter, ikey: key, readonly, type:this._type };\r\n  }\r\n\r\n  setValue(val) {\r\n    this.vueContext.value = val.value;\r\n    //this._types.value=val.type.name;\r\n  }\r\n}\r\n\r\nexport default DynamicControl;","import \"@babel/polyfill\";\r\nimport NodeComponent from '../NodeComponent';\r\nimport { methods } from \"../compile/PredefinedMethod\";\r\nimport { Method, Variable } from \"../compile/DataDefine\";\r\nimport NumControl from \"../control/NumControl\";\r\nimport Vec2Control from \"../control/Vec2Control\";\r\nimport Vec3Control from \"../control/Vec3Control\";\r\nimport Vec4Control from \"../control/Vec4Control\";\r\nimport DynamicControl from \"../control/DynamicControl\";\r\n\r\nconst MAPPING_SOCKET = {\r\n    'float':NumControl,\r\n    'vec2':Vec2Control,\r\n    'vec3':Vec3Control,\r\n    'vec4':Vec4Control\r\n}\r\n\r\nconst TYPE_LEVEL = {\r\n    'any':0,\r\n    'float':1,\r\n    'vec2':2,\r\n    'vec3':3,\r\n    'vec4':4,\r\n}\r\n\r\nfunction maxType(t1,t2){\r\n    const v1 = TYPE_LEVEL[t1]\r\n    const v2 = TYPE_LEVEL[t2]\r\n    return v1>v2?v1:v2;\r\n}\r\n\r\nfunction minType(t1,t2){\r\n    const v1 = TYPE_LEVEL[t1]\r\n    const v2 = TYPE_LEVEL[t2]\r\n    return v1<v2?v1:v2;\r\n}\r\n\r\nfunction largestTypeInSet(s){\r\n    let maxT = 'any'\r\n    for(let t of s){\r\n        maxT = maxType(maxT,t)\r\n    }\r\n    return maxT;\r\n}\r\n\r\nclass MethodsList{\r\n    constructor(methods=[],outputName=\"Output\",inputNames=[],inputKeys=[]){\r\n        this.methods = methods;\r\n        this.outputSet = Method.gatherMethodsTypeSet(methods,'');\r\n        this.inputSets = generateInputSets(methods,inputKeys)\r\n        this.inputKeys = inputKeys\r\n\r\n        this.outputName = outputName;\r\n        this.inputNames = inputNames;\r\n    }\r\n}\r\nfunction generateInputSets(methods_,inputKeys = ['']){\r\n    let inputSets = new Map()\r\n    for(const key of inputKeys){\r\n        let result = Method.gatherMethodsTypeSet(methods_,key);\r\n        inputSets.set(key,result)\r\n    }\r\n    return inputSets;\r\n}\r\nclass MethodTemplateComponent extends NodeComponent {\r\n    constructor(name,methodsLists) {\r\n        super(name);\r\n        if(!methodsLists.length){\r\n            methodsLists = [methodsLists]\r\n        }\r\n        this.methodsLists = methodsLists;\r\n        this.inputSets = new Map();\r\n        for(let ml of this.methodsLists){\r\n            for(const key of ml.inputSets.keys()){\r\n                const inputSet = ml.inputSets.get(key)\r\n                let selfi = new Set();\r\n                this.inputSets.set(key,selfi);\r\n                for(let v of inputSet.values()){\r\n                    selfi.add(v)\r\n                }\r\n            }\r\n        }\r\n        console.log(this)\r\n        this.lastConnection = null;\r\n        this.installed = false\r\n        \r\n    }\r\n\r\n    getSocketType(set){\r\n        return 'null'\r\n        /*\r\n        if(set.size>1){\r\n            return set.values()[0]//'any'\r\n        }else if(set.size==1){\r\n            return set.values()[0]\r\n        }else{\r\n            return 'null';\r\n        }\r\n        */\r\n    }\r\n\r\n    _createOutputSocket(node,set,key=\"num_out\",name=\"Output\"){\r\n        const output = this.getSocketType(set);\r\n        if(output.name=='null'){\r\n            return;\r\n        }\r\n        let p = this._addNumSocketOutput(node,key,name,output);\r\n        p.possibleSocket = this._wrapSocketType(set)\r\n        p.alwaysShowName=true;\r\n    }\r\n\r\n    _createInputSocket(node,set,key,name){\r\n        const inputSocket = this.getSocketType(this._wrapSocketType(set))\r\n        if(inputSocket.name=='null'){\r\n            return;\r\n        }\r\n        let p =this._addNumSocketInput(node,key,name,inputSocket,DynamicControl)\r\n        p.possibleSocket=this._wrapSocketType(set);\r\n        p.alwaysShowName=true;\r\n    }\r\n\r\n    _getInputName(index){\r\n        return this.methodsLists[0].inputNames[index];\r\n    }\r\n\r\n    _getInputKeys(){\r\n        return this.methodsLists[0].inputKeys;\r\n    }\r\n\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        let ind=0\r\n        for(let ml of this.methodsLists){\r\n            this._createOutputSocket(node,ml.outputSet,`out_${ind}`,ml.outputName)\r\n            ind++\r\n        }\r\n        for(const key of this.inputSets.keys()){\r\n            this._createInputSocket(node,this.inputSets.get(key),`${key}`,this._getInputName(key))\r\n        }\r\n        if(!this.installed && this.editor){\r\n            this.installed=true;\r\n            this.editor.on('connectionpath', data => {\r\n                const {\r\n                    points, // array of numbers, e.g. [x1, y1, x2, y2]\r\n                    connection, // Rete.Connection instance\r\n                    d // string, d attribute of <path>\r\n                } = data;\r\n                this.lastConnection = connection;\r\n                //data.d = `M ${x1} ${y1} ${x2} ${y2}`; // you can override the path curve\r\n            });\r\n        }\r\n        return node;\r\n    }\r\n\r\n    removeConnections(cs){\r\n        let cs2=[]\r\n        for(const c of cs){\r\n            cs2.push(c)\r\n        }\r\n        for(const c of cs2){\r\n            this.editor.removeConnection(c)\r\n        }\r\n    }\r\n\r\n    updateSocketConnections(socket){\r\n        const cs = socket.connections\r\n        let cs2=[]\r\n        for(const c of cs){\r\n            cs2.push(c)\r\n        }\r\n        for(const c of cs2){\r\n            let accept = c.input.checkConnection(c) && c.output.checkConnection(c)\r\n            if(!accept){\r\n                console.log(\"remove connection\",c)\r\n                this.editor.removeConnection(c)\r\n            }\r\n        }\r\n    }\r\n\r\n    _wrapSocketType(s){\r\n        let r = new Set();\r\n        if(!s){\r\n            return r;\r\n        }\r\n        for(const v of s.values()){\r\n            r.add(this._getSocket(v))\r\n        }\r\n        return r;\r\n    }\r\n\r\n    resetInputSocketsType(realNode){\r\n        for(const key of this.inputSets.keys()){\r\n            const inKey = `${key}`\r\n            let inputSocket = realNode.inputs.get(inKey);\r\n            const inputSet = this.inputSets.get(key)\r\n            inputSocket.setSocket(this._getSocket('null'))\r\n            inputSocket.possibleSocket = this._wrapSocketType(inputSet);\r\n        }\r\n    }\r\n    worker(node, inputs, outputs) {\r\n        this.clearErrorInfo(node);\r\n        let realNode = this.getRealNode(node);\r\n        const inputs2 = this._extractInput(node,inputs);\r\n        //try to match for each output\r\n        let nullMatchMethods = []\r\n        for(let indml=0;indml<this.methodsLists.length;indml++){\r\n            const ml = this.methodsLists[indml]\r\n            const outKey = `out_${indml}`\r\n            const result = Method.matchPartMethods(ml.methods,null,inputs2)\r\n            let outSocket = realNode.outputs.get(outKey);\r\n            console.log(\"Match result\",result)\r\n            outSocket.possibleSocketTemp =  this._wrapSocketType(Method.gatherMethodsTypeSet(result.allMatch,''));\r\n            console.log(outSocket.possibleSocketTemp)\r\n            if(result.fullMatch.length>0){\r\n                for(const m of result.fullMatch){\r\n                    nullMatchMethods.push(m)\r\n                }\r\n                const m = result.fullMatch[0];\r\n                outputs[outKey] = m.execute(inputs2)\r\n                outSocket.setSocket(this._getSocket(outputs[outKey].type.name))\r\n                outSocket.possibleSocket = new Set();\r\n                outSocket.hide = false;\r\n                this.updateSocketConnections(outSocket)\r\n            }else if(result.nullMatch.length>0){ //match part\r\n                for(const m of result.nullMatch){\r\n                    nullMatchMethods.push(m)\r\n                }\r\n                outSocket.setSocket(this._getSocket('null'))\r\n                outSocket.possibleSocket =  this._wrapSocketType(Method.gatherMethodsTypeSet(result.nullMatch,''));\r\n                \r\n                outSocket.hide = false;\r\n                this.updateSocketConnections(outSocket)\r\n            }else{\r\n                outSocket.setSocket(this._getSocket('null'))\r\n                outSocket.possibleSocket = new Set();\r\n                outSocket.hide = true;\r\n                this.updateSocketConnections(outSocket)\r\n                //this.removeConnections(outSocket.connections);\r\n            }\r\n            \r\n        }\r\n\r\n        if(nullMatchMethods.length==0){\r\n            this.editor.removeConnection(this.lastConnection);\r\n            this.lastConnection=null;\r\n            this.resetInputSocketsType(realNode);\r\n            this.setErrorInfo(node,\"Cannot match\");\r\n            throw Error(\"Cannot match!\")\r\n        }else{\r\n            let inputSets = generateInputSets(nullMatchMethods,this._getInputKeys());\r\n            console.log(inputSets)\r\n            for(const key of inputSets.keys()){\r\n                const inKey = `${key}`\r\n                let inputSocket = realNode.inputs.get(inKey);\r\n                const inputSet = inputSets.get(key)\r\n                inputSocket.possibleSocketTemp = this._wrapSocketType(inputSet);\r\n                console.log(inputSet)\r\n                if(inputs[key].length==0){\r\n                    continue;\r\n                }\r\n                if(inputSet.size>1){\r\n                    inputSocket.setSocket(this._getSocket('null'))\r\n                    inputSocket.possibleSocket = this._wrapSocketType(inputSet);\r\n                    this.updateSocketConnections(inputSocket)\r\n                }else if (inputSet.size==1){\r\n                    inputSocket.setSocket(this._getSocket([...inputSet.values()][0]));\r\n                    inputSocket.possibleSocket = this._wrapSocketType(inputSet);\r\n                    this.updateSocketConnections(inputSocket)\r\n                }else {\r\n                    //inputSocket.setSocket(this._getSocket('null'))\r\n                    //inputSocket.possibleSocket = new Set();\r\n                    //this.removeConnections(inputSocket.connections);\r\n                    inputSocket.possibleSocket = new Set();\r\n                    this.updateSocketConnections(inputSocket)\r\n                }\r\n            }\r\n            \r\n        }\r\n\r\n        realNode.vueContext.$forceUpdate();\r\n\r\n        this.resetInputSocketsType(realNode);\r\n        super.worker(node,inputs,outputs)\r\n    }\r\n}\r\n\r\nexport {MethodTemplateComponent, MethodsList}","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport NumControl from \"../control/NumControl\"\r\nimport NodeComponent from '../NodeComponent';\r\nimport { methods } from \"../compile/PredefinedMethod\";\r\nimport { Method } from \"../compile/DataDefine\";\r\nimport {MethodTemplateComponent, MethodsList} from \"./MethodTemplateComponent\"\r\n// dynamic node by: http://jsfiddle.net/vmxdcLbq/27/\r\nclass ComputeComponent extends NodeComponent {\r\n    constructor(name,methodTag,displayOp=\"\") {\r\n        super(name);\r\n        this.methodTag = methodTag\r\n        this.displayOp=displayOp\r\n    }\r\n\r\n    builder(node) {\r\n        \r\n        super.builder(node);\r\n        this._addNumSocketInput(node,'num', \"Number1\",\"any\")\r\n        this._addNumSocketInput(node,'num2', this.displayOp+\"Number2\",\"any\")\r\n        this._addNumSocketOutput(node,'num', \"Result\",\"any\")\r\n        //node.addControl(new NumControl(this.editor, 'preview', true))\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        this.clearErrorInfo(node);\r\n        //let realNode = this.editor.nodes.find(n => n.id == node.id);\r\n        let methodList = methods[this.methodTag];\r\n        console.log(inputs)\r\n        console.log(outputs)\r\n        let input2 = this._extractInput(node,inputs);\r\n        let method = Method.matchMethod(methodList,this.methodTag,input2);\r\n        if(!method){\r\n            console.log(input2)\r\n            this.setErrorInfo(node,\r\n                `Failed to compute\\nPlease change inputs\\nInput type:\\n Number1:${input2['num'].type} \\n Number2:${input2['num2'].type}\\nFor example\\nYou can use Floats2RGB component to build a vec3\\n and DecomposeVec2 to break down vec2 into numbers`\r\n            )\r\n        }\r\n        let result = method.execute(input2);\r\n\r\n        //this.setErrorInfo(realNode,\"asdhaskjdh aslkdj ddddddddddddddddddddddddddddd\"+method)\r\n        \r\n        //realNode.controls.get('preview').setValue(result.value);\r\n        outputs['num'] = result;\r\n        super.worker(node,inputs,outputs)\r\n        console.log(node);\r\n    }\r\n}\r\n\r\n//var addComponent = new ComputeComponent(\"Add\",\"add\");\r\n//var minusComponent = new ComputeComponent(\"Minus\",\"minus\");\r\n//var divComponent = new ComputeComponent(\"Division\",\"div\");\r\n//var multiComponent = new ComputeComponent(\"Multiply\",\"mult\");\r\nvar addComponent = new MethodTemplateComponent('Add',\r\n    new MethodsList(methods['add'],'Result',{'num':'Number','num2':'+Number'},['num','num2']));\r\n    var divComponent = new MethodTemplateComponent('Division',\r\n    new MethodsList(methods['div'],'Result',{'num':'Number','num2':'/Number'},['num','num2']));\r\n    var multiComponent = new MethodTemplateComponent('Multiply',\r\n    new MethodsList(methods['mult'],'Result',{'num':'Number','num2':'*Number'},['num','num2']));\r\nvar minusComponent = new MethodTemplateComponent('Minus',\r\n    new MethodsList(methods['minus'],'Result',{'num':'Number','num2':'-Number'},['num','num2']));\r\n\r\n\r\n    export default ComputeComponent;\r\nexport{\r\n    addComponent,minusComponent,divComponent,multiComponent\r\n}\r\n","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\n\r\nimport NodeComponent from \"../NodeComponent\";\r\n\r\nclass OutputComponent extends NodeComponent{\r\n\r\n    constructor(){\r\n        super(\"OutputComponent\");\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addInput(node,\"out\",\"Output Color\");\r\n        return node\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        node.result = inputs[\"out\"];\r\n        if (node.result == undefined || node.result.length==0){\r\n            node.result = [\"0\"];\r\n        }\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default OutputComponent;","import \"@babel/polyfill\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nimport { Variable } from \"../compile/DataDefine\";\r\n\r\n// this component mainly manage the buffer input data from model (like normal, uv, vertex position, tangent)\r\nclass InputComponent extends NodeComponent{\r\n\r\n    /**\r\n     * \r\n     * @param {string} name node name\r\n     * @param {string} socketName socket name\r\n     * @param {Variable} variable a variable to describe its input, it usually is a kind of buffer data. (no constant in some way)\r\n     */\r\n    constructor(name,socketName,variable) {\r\n        super(name);\r\n        this.socketName=socketName;\r\n        this.variable = variable;\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addNumSocketOutput(node,'num', this.socketName,this.variable.type.name)\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['num'] = this.variable;\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default InputComponent;\r\n","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport NumControl from \"../control/NumControl\"\r\nimport NodeComponent from \"../NodeComponent\";\r\nimport { Method, Variable } from \"../compile/DataDefine\";\r\nimport { float2PointString } from \"../utility/utility\";\r\nimport { methods } from \"../compile/PredefinedMethod\";\r\n\r\n\r\nclass Floats2RGComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Number To Vec2\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"r\",\"X\",\"float\");\r\n        this._addNumSocketInput(node,\"g\",\"Y\",\"float\");\r\n        this._addNumSocketOutput(node,'rgb', \"2D Position/Vector2\", \"vec2\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        // three methods to compute the result, recommend the third method, if too hard, use the first/second method\r\n\r\n        //outputs[\"rgb\"] = new Variable(\"vec3\",\"vec3(\"+inputs[\"r\"][0]+\",\"+inputs[\"g\"][0]+\",\"+inputs[\"b\"][0]+\")\");\r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"rgb\"]= methods[\"varying\"][0].execute(inputs2);\r\n        //outputs[\"rgb\"] = methodExecute.execute(this._extractInput(inputs2));\r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\n\r\nclass Floats2RGBComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Number To Vec3\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"r\",\"Red\",\"float\");\r\n        this._addNumSocketInput(node,\"g\",\"Green\",\"float\");\r\n        this._addNumSocketInput(node,\"b\",\"Blue\",\"float\");\r\n        this._addNumSocketOutput(node,'rgb', \"RGB Color/Vector3\", \"vec3\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        // three methods to compute the result, recommend the third method, if too hard, use the first/second method\r\n\r\n        //outputs[\"rgb\"] = new Variable(\"vec3\",\"vec3(\"+inputs[\"r\"][0]+\",\"+inputs[\"g\"][0]+\",\"+inputs[\"b\"][0]+\")\");\r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"rgb\"]= methods[\"varying\"][1].execute(inputs2);\r\n        //outputs[\"rgb\"] = methodExecute.execute(this._extractInput(inputs2));\r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\nclass Floats2RGBAComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Number To Vec4\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"r\",\"Red\",\"float\");\r\n        this._addNumSocketInput(node,\"g\",\"Green\",\"float\");\r\n        this._addNumSocketInput(node,\"b\",\"Blue\",\"float\");\r\n        this._addNumSocketInput(node,\"a\",\"Alpha\",\"float\");\r\n        this._addNumSocketOutput(node,'rgb', \"RGBA Color/Vector4\", \"vec4\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        // three methods to compute the result, recommend the third method, if too hard, use the first/second method\r\n\r\n        //outputs[\"rgb\"] = new Variable(\"vec3\",\"vec3(\"+inputs[\"r\"][0]+\",\"+inputs[\"g\"][0]+\",\"+inputs[\"b\"][0]+\")\");\r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"rgb\"]= methods[\"varying\"][2].execute(inputs2);\r\n        //outputs[\"rgb\"] = methodExecute.execute(this._extractInput(inputs2));\r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\n\r\n\r\n\r\nexport {\r\n    Floats2RGComponent,\r\n    Floats2RGBComponent,\r\n    Floats2RGBAComponent\r\n}\r\n// then find node/utility/ReteManager.js, \r\n// import this file, in _buildComponents(){ add component\r\n","import \"@babel/polyfill\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nimport { methods } from \"../compile/PredefinedMethod\";\r\nimport { Method } from \"../compile/DataDefine\";\r\n\r\nimport NumControl from \"../control/NumControl\";\r\nimport Vec2Control from \"../control/Vec2Control\";\r\nimport Vec3Control from \"../control/Vec3Control\";\r\nimport Vec4Control from \"../control/Vec4Control\";\r\nclass RG2FloatsComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Vec2 to Numbers\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"v\",\"Vector 2D\",\"vec2\",Vec2Control);\r\n        this._addNumSocketOutput(node,'r', \"X\", \"float\")\r\n        this._addNumSocketOutput(node,'g', \"Y\", \"float\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"r\"]=Method.matchMethod(methods[\"extract\"],\"extract_r\",inputs2).execute(inputs2)\r\n        outputs[\"g\"]=Method.matchMethod(methods[\"extract\"],\"extract_g\",inputs2).execute(inputs2)\r\n        \r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\n\r\nclass RGB2FloatsComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Vec3 to Numbers\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"v\",\"Vector3/RGB Color\",\"vec3\",Vec3Control);\r\n        this._addNumSocketOutput(node,'r', \"X / Red\", \"float\")\r\n        this._addNumSocketOutput(node,'g', \"Y / Green\", \"float\")\r\n        this._addNumSocketOutput(node,'b', \"Z / Blue\", \"float\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"r\"]=Method.matchMethod(methods[\"extract\"],\"extract_r\",inputs2).execute(inputs2)\r\n        outputs[\"g\"]=Method.matchMethod(methods[\"extract\"],\"extract_g\",inputs2).execute(inputs2)\r\n        outputs[\"b\"]=Method.matchMethod(methods[\"extract\"],\"extract_b\",inputs2).execute(inputs2)\r\n        \r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\n\r\nclass RGBA2FloatsComponent extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"Vec4 to Numbers\"); // node title name\r\n    }\r\n\r\n    // build a node\r\n    builder(node) {\r\n        super.builder(node);// remember to invoke super first\r\n        this._addNumSocketInput(node,\"v\",\"Vector4/RGBA Color\",\"vec4\",Vec4Control);\r\n        this._addNumSocketOutput(node,'r', \"X / Red\", \"float\")\r\n        this._addNumSocketOutput(node,'g', \"Y / Green\", \"float\")\r\n        this._addNumSocketOutput(node,'b', \"Z / Blue\", \"float\")\r\n        this._addNumSocketOutput(node,'a', \"W / Alpha\", \"float\")\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        \r\n        const inputs2 = this._extractInput(node,inputs);\r\n        outputs[\"r\"]=Method.matchMethod(methods[\"extract\"],\"extract_r\",inputs2).execute(inputs2)\r\n        outputs[\"g\"]=Method.matchMethod(methods[\"extract\"],\"extract_g\",inputs2).execute(inputs2)\r\n        outputs[\"b\"]=Method.matchMethod(methods[\"extract\"],\"extract_b\",inputs2).execute(inputs2)\r\n        outputs[\"a\"]=Method.matchMethod(methods[\"extract\"],\"extract_a\",inputs2).execute(inputs2)\r\n        \r\n        super.worker(node,inputs,outputs); //remember to invoke super last\r\n    }\r\n}\r\n\r\nexport{\r\n    RG2FloatsComponent,\r\n    RGB2FloatsComponent,\r\n    RGBA2FloatsComponent\r\n}","import \"@babel/polyfill\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nimport NumControl from \"../control/NumControl\";\r\nimport Vec2Control from \"../control/Vec2Control\";\r\nimport Vec3Control from \"../control/Vec3Control\";\r\nimport Vec4Control from \"../control/Vec4Control\";\r\n\r\nimport { methods } from \"../compile/PredefinedMethod\";\r\nimport { Method } from \"../compile/DataDefine\";\r\n\r\nimport {MethodTemplateComponent, MethodsList} from \"./MethodTemplateComponent\"\r\n\r\nvar dotComponent = new MethodTemplateComponent('Dot Product',\r\n    new MethodsList(methods['dot'],'Number',{'a':'Vector','b':'Vector'},['a','b']));\r\nexport {dotComponent}","import \"@babel/polyfill\";\r\nimport Vec2Control from \"../control/Vec2Control\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nclass Vec2Component extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"2D Vector\");\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addNumSocketOutput(node,'num', \"2D Vector\",\"vec2\");\r\n        node.addControl(new Vec2Control(this.editor, 'num'));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['num'] = node.data.num;\r\n        console.log(outputs);\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default Vec2Component;\r\n","import \"@babel/polyfill\";\r\nimport Vec3Control from \"../control/Vec3Control\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nclass Vec3Component extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"3D Vector\");\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addNumSocketOutput(node,'num', \"3D Vector\",\"vec3\");\r\n        node.addControl(new Vec3Control(this.editor, 'num'));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['num'] = node.data.num;\r\n        console.log(outputs);\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default Vec3Component;\r\n","import \"@babel/polyfill\";\r\nimport Vec4Control from \"../control/Vec4Control\";\r\nimport NodeComponent from \"../NodeComponent\";\r\nclass Vec4Component extends NodeComponent {\r\n\r\n    constructor() {\r\n        super(\"4D Vector\");\r\n    }\r\n\r\n    builder(node) {\r\n        super.builder(node);\r\n        this._addNumSocketOutput(node,'num', \"4D Vector\",\"vec4\");\r\n        node.addControl(new Vec4Control(this.editor, 'num'));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['num'] = node.data.num;\r\n        console.log(outputs);\r\n        super.worker(node,inputs,outputs);\r\n    }\r\n}\r\n\r\nexport default Vec4Component;\r\n","import { deepClone } from \"./utility\";\r\nimport Rete from 'rete'\r\n\r\n\r\nclass TemplateConnection{\r\n    constructor(){\r\n        this.inputKey = null;\r\n        this.inputID = null\r\n        this.outputKey = null;\r\n        this.outputID = null;\r\n        this.data = {}\r\n    }\r\n\r\n    genKey(){\r\n        return `${this.inputKey}_${this.inputID}|${this.outputKey}_${this.outputID}`\r\n    }\r\n\r\n    fromConnection(connection){\r\n        this.data = deepClone(connection.data);\r\n        this.inputKey = connection.input.key;\r\n        this.inputID = connection.input.node.id;\r\n        this.outputKey = connection.output.key;\r\n        this.outputID = connection.output.node.id;\r\n        return this;\r\n    }\r\n}\r\n\r\nclass TemplateNode{\r\n    constructor(){\r\n        this.id = null;\r\n        this.ref = null; //reference to the existing node\r\n        this.data = {};\r\n        this.position = [0,0];\r\n        this.connections = [];\r\n        this.name = \"\"\r\n    }\r\n\r\n    genKey(){\r\n        return this.id;\r\n    }\r\n\r\n    fromNode(node){\r\n        this.ref = node;\r\n        this.data = deepClone(node.data);\r\n        this.id = node.id;\r\n        this.position = [...node.position]\r\n        this.name = node.name;\r\n        return this;\r\n    }\r\n}\r\n\r\nclass NodeGraphTemplate{\r\n\r\n    constructor(){\r\n        this.nodes = new Map();\r\n        this.connections = new Map();\r\n        this.fromSocket = null;\r\n        this.fromNode = null;\r\n        this.outputSocket = null;\r\n        this.outputSocketTemplate = null\r\n        this.relativePosition = [0,0] //original position \r\n        this.retainConnection=false;\r\n    }\r\n\r\n    saveSocket(fromSocket){\r\n        this.fromNode = fromSocket.node;\r\n        this.fromSocket = fromSocket;\r\n        this.relativePosition = [...fromSocket.node.position]\r\n        if(fromSocket instanceof Rete.Output){\r\n            this.outputSocket=fromSocket\r\n            this._saveNode(fromSocket.node);\r\n            this.outputSocketTemplate = {\r\n                id:fromSocket.node.id,\r\n                key:fromSocket.key\r\n            }\r\n        }else{\r\n            if(!fromSocket.connections.length){\r\n                console.log(fromSocket);\r\n                console.log(fromSocket.node.inputs.get(fromSocket.key));\r\n                console.log(fromSocket.key)\r\n                this._saveNode(fromSocket.node,false);\r\n                this.outputSocket = fromSocket;\r\n                this.retainConnection=true;\r\n                return;\r\n            }\r\n            this.outputSocket=fromSocket.connections[0].output\r\n            this._saveNode(fromSocket.connections[0].output.node);\r\n            this.outputSocketTemplate = {\r\n                id:this.outputSocket.node.id,\r\n                key:this.outputSocket.key\r\n            }\r\n        }\r\n    }\r\n\r\n    _saveNode(node,rec= true){\r\n        if(rec){\r\n            for(let k of node.inputs.keys()){\r\n                const inputSocket = node.inputs.get(k)\r\n                for(let connection of inputSocket.connections){\r\n                    this._saveConnection(connection)\r\n                    this._saveNode(connection.output.node);\r\n                }\r\n            }\r\n        }\r\n        \r\n        const tn = new TemplateNode().fromNode(node);\r\n        this.nodes.set(tn.genKey(),tn);\r\n    }\r\n\r\n    _saveConnection(connection){\r\n        const tc = new TemplateConnection().fromConnection(connection);\r\n        this.connections.set(tc.genKey(),tc);\r\n    }\r\n\r\n    async applyToEditor(editor,alwaysCreateNew = false,referencePos=[0,0]){\r\n        const viewNodes = editor.view.nodes\r\n        let tempMapNodes = new Map(); // old id -> existing node\r\n        let newNodes = new Map();// old id -> new node\r\n        for(let nodeTemplate of this.nodes.values()){\r\n            if(!alwaysCreateNew && viewNodes.has(nodeTemplate.ref)){\r\n                for(let key in nodeTemplate.data){\r\n                    nodeTemplate.ref.setData(key,nodeTemplate.data[key])\r\n                }\r\n                tempMapNodes.set(nodeTemplate.id,nodeTemplate.ref);\r\n            }else{\r\n                const component = editor.components.get(nodeTemplate.name)\r\n                const data = deepClone(nodeTemplate.data);\r\n                let node = await component.createNode(data);\r\n                console.log(\"new node!!\",node)\r\n                node.position = [...nodeTemplate.position];\r\n                console.log(\"alwaysCreateNew\",alwaysCreateNew);\r\n                if(alwaysCreateNew){\r\n                    node.position[0]+=referencePos[0]-this.relativePosition[0]\r\n                    node.position[1]+=referencePos[1]-this.relativePosition[1]\r\n                }\r\n                editor.addNode(node);\r\n                for(let key in nodeTemplate.data){\r\n                    node.setData(key,nodeTemplate.data[key])\r\n                }\r\n                tempMapNodes.set(nodeTemplate.id,node);\r\n                newNodes.set(nodeTemplate.id,node);\r\n            }\r\n        }\r\n        //restore connection\r\n        console.log(this.connections)\r\n        let newConnections = []\r\n        for(let c of this.connections.values()){\r\n            let inputNode = tempMapNodes.get(c.inputID);\r\n            let outputNode = tempMapNodes.get(c.outputID);\r\n            //let inputSocket = inputNode.inputs.get(c.inputKey);\r\n            //let outputSocket = outputNode.outputs.get(c.outputKey);\r\n            //editor.connect(outputSocket,inputSocket,deepClone(c.data));\r\n            let flag=false;\r\n            const oldKey = c.genKey();\r\n            if(newNodes.has(c.inputID)){\r\n                c.inputID=inputNode.id;\r\n                flag=true;\r\n            }\r\n            if(newNodes.has(c.outputID)){\r\n                c.outputID=outputNode.id;\r\n                flag=true;\r\n            }\r\n            if(flag){\r\n                newConnections.push([c,oldKey]);\r\n            }\r\n        }\r\n        \r\n        //restore information for new data\r\n        for(const oldID of newNodes.keys()){\r\n            let node = newNodes.get(oldID);\r\n            const newID = node.id;\r\n            let templateNode = this.nodes.get(oldID);\r\n            templateNode.id=newID;\r\n            templateNode.ref = node;\r\n            this.nodes.set(newID,templateNode)\r\n            this.nodes.delete(oldID);\r\n            console.log(\"update node id\",oldID,newID,node,templateNode)\r\n        }\r\n\r\n        for(const ck of newConnections){\r\n            const c = ck[0]\r\n            const oldKey = ck[1];\r\n            this.connections.delete(oldKey)\r\n            this.connections.set(c.genKey(),c);\r\n            console.log(\"update connection\", oldKey, c.genKey(),c)\r\n        }\r\n\r\n        //remove connections\r\n        if(!this.retainConnection){\r\n            for(let nodeTemplate of this.nodes.values()){\r\n                console.log(nodeTemplate.ref.inputs)\r\n                for(let input of nodeTemplate.ref.inputs.values()){\r\n                    const connection = input.connections[0]\r\n                    if(connection){\r\n                        const k = new TemplateConnection().fromConnection(connection).genKey();\r\n                        if(!this.connections.has(k)){\r\n                            console.log(\"remove connection \",connection);\r\n                            editor.removeConnection(connection);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n\r\n        for(let c of this.connections.values()){\r\n            let inputNode = this.nodes.get(c.inputID).ref;\r\n            let outputNode = this.nodes.get(c.outputID).ref;\r\n            let inputSocket = inputNode.inputs.get(c.inputKey);\r\n            let outputSocket = outputNode.outputs.get(c.outputKey);\r\n            editor.connect(outputSocket,inputSocket,deepClone(c.data));\r\n        }\r\n        console.log(this)\r\n        return newNodes;\r\n    }\r\n}\r\n\r\nexport default NodeGraphTemplate;\r\nexport {TemplateConnection, TemplateNode}","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\n\r\nimport {arrayLerp, deepClone, pointDistance} from \"./utility\"\r\nimport {PreviewBoxComponent,PreviewBoxNode} from \"../comp/PreviewComponent\"\r\nimport NodeGraphTemplate from \"./NodeGraphTemplate\";\r\nimport InverseSet from \"./InversableAssign\";\r\nimport { Variable } from \"../compile/DataDefine\";\r\n\r\n\r\nfunction genAlongSocketID(socket){\r\n    return `socket_${socket.key}_${socket.node.id}_${socket instanceof Rete.Output?\"out\":\"in\"}`;\r\n}\r\n\r\nfunction genSingleID(oldID){\r\n    return 'single_'+Math.random().toString(36).slice(-6)+\"_\"+oldID;\r\n}\r\n\r\nclass PreviewManager{\r\n    constructor(editor,manager){\r\n        this.editor = editor;\r\n        this.manager = manager;//rete manager\r\n        this._comp = new PreviewBoxComponent();\r\n        this.editor.register(this._comp);\r\n        this.previews = new Map();\r\n        this.pointFloat = new Map();\r\n        this.independentPreviewInteraction = new IndependentPreviewInteraction(this);\r\n        this._enablePreview=false;\r\n        this.editor.on(\"nodecreated\",(param)=>{\r\n            console.log(param);\r\n            if(! (param instanceof PreviewBoxNode)){\r\n                this.setupInteraction(param);\r\n            }\r\n            \r\n        })\r\n        this.editor.on('noderemoved',(node)=>{\r\n            this.pointFloat.delete(node.id);\r\n        })\r\n    }\r\n\r\n    async addPreview(pos,id){\r\n        if(this.previews.has(id)){\r\n            console.log(\"Already existing preview\",id);\r\n            let preview = this.previews.get(id);\r\n            preview.setPosition(this.editor,pos);\r\n            return preview;\r\n        }\r\n        let ms = this.manager.context.modelStore.roughClone();\r\n        console.log(\"add Preview\",id);\r\n        let node = await this._comp.createNode({\"modelStore\":ms});\r\n        node.position = pos;\r\n        this.editor.addNode(node);\r\n        this.previews.set(id,node);\r\n        return node;\r\n    }\r\n\r\n    renamePreview(oldID,newID){\r\n        if(this.previews.has(oldID)){\r\n            if(this.previews.has(newID)){\r\n                console.warn(\"Duplicated preview id\");\r\n            }\r\n            this.previews.set(newID,this.previews.get(oldID));\r\n            this.previews.delete(oldID);\r\n        }else{\r\n            console.log(\"Unknown preview\",oldID)\r\n        }\r\n    }\r\n\r\n    //remove preview, unless it has lock state\r\n    //you can still remove it with force==true\r\n    removePreview(id,force=false){\r\n        if(!this.previews.has(id)){\r\n            console.log(\"remove Preview (failed)\",id);\r\n            return;\r\n        }\r\n        let preview = this.previews.get(id)\r\n        if(preview.state==\"lock\" && !force){\r\n            console.log(\"preview locked\",id);\r\n            return;\r\n        }\r\n        console.log(\"remove Preview\",id);\r\n        this.editor.removeNode(preview);\r\n        this.previews.delete(id);\r\n    }\r\n\r\n    getNodeView(node){\r\n        return this.editor.view.nodes.get(node);\r\n    }\r\n\r\n    getSocketView(socket){\r\n        return this.editor.view.nodes.get(socket.node).sockets.get(socket);\r\n    }\r\n\r\n    //TODO: add node translation\r\n    addPreviewAlongConnection(connection,lerp=0.5){\r\n        let preview; \r\n        const id = `c_${connection.input.id}_${connection.output.id}_${lerp}`\r\n        let func = (node)=>{\r\n            const inpos = connection.input.position;\r\n            const outpos = connection.output.position;\r\n            preview.setPosition(this.editor,arrayLerp(inpos,outpos,lerp));\r\n        }\r\n        let funcRemove = (node)=>{\r\n            this.removePreview(id);\r\n        }\r\n        if(lerp!=0){\r\n            connection.input.on(\"translatenode\",func);\r\n            connection.input.on(\"noderemoved\",funcRemove)\r\n        }\r\n        if(lerp!=1){\r\n            connection.output.on(\"translatenode\",(node)=>func(node));\r\n            connection.output.on(\"noderemoved\",funcRemove)\r\n        }\r\n        preview = this.addPreview(func(null),id);\r\n        return preview;\r\n    }\r\n\r\n    //TODO: sort this code into a single class\r\n    async addPreviewAlongSocket(socket,getPadding=function(socket){return [0,5]}){\r\n        const id = genAlongSocketID(socket);\r\n        let preview = await this.addPreview([100,0],id);\r\n        let idlePosition = [0,0]\r\n        let translationAnimationTimer = null;\r\n        const RANGE=160;\r\n        let func = (node)=>{\r\n            let socketView = this.getSocketView(socket);\r\n            let centerPos = socketView.getPosition(socketView.node);\r\n            let previewView = preview.el //TODO: cannot obtain view from rete editor, strange\r\n            if(!previewView){\r\n                previewView = {clientWidth:100,clientHeight:100}\r\n            }\r\n            if(socket instanceof Rete.Output){\r\n                centerPos[0]+=getPadding(socket)[0];\r\n            }else{\r\n                centerPos[0]-=getPadding(socket)[0]+previewView.clientWidth;\r\n            }\r\n            centerPos[1]+=getPadding(socket)[1]-previewView.clientHeight/2;\r\n            preview.setPosition(this.editor,centerPos);\r\n            idlePosition = [...centerPos]\r\n        }\r\n        let funcRemove = (node)=>{\r\n            this.removePreview(id);\r\n        }\r\n        let funcNodeUpdate = (params)=>{\r\n            const node = params.node;\r\n            if(socket instanceof Rete.Output){\r\n                preview.variable = params.outputData[socket.key];\r\n            }else{\r\n                let v = this.editor.components.get(node.name).extractInputKey(node,params.inputData,socket.key)\r\n                preview.variable = v;\r\n            }\r\n        }\r\n        let funcPreviewTranslated = (node)=>{\r\n            if(pointDistance(preview.position,idlePosition)>RANGE){\r\n                preview.addNodeClass('preview-independ-try')\r\n            }else{\r\n                preview.removeNodeClass('preview-independ-try')\r\n            }\r\n        }\r\n        let funcPreviewSelect = (node)=>{\r\n            if(translationAnimationTimer){\r\n                clearInterval(translationAnimationTimer);\r\n            }\r\n            translationAnimationTimer=null;\r\n        }\r\n        // change the preview to an independent one\r\n        let funcDragPreview = (params)=>{\r\n            console.log(\"drag end\",params);\r\n            //independent preview created!\r\n            if(pointDistance(preview.position,idlePosition)>RANGE){\r\n                preview.removeNodeClass('preview-independ-try')\r\n                const newID = genSingleID(id);\r\n                this.renamePreview(id,newID);\r\n                socket.node.removeListener(\"translatenode\",func)\r\n                socket.node.removeListener(\"noderemoved\",funcRemove);\r\n                socket.node.removeListener(\"nodeworked\",funcNodeUpdate);\r\n                preview.removeListener(\"nodedraged\",funcDragPreview);\r\n                preview.removeListener(\"translatenode\",funcPreviewTranslated);\r\n                preview.removeListener(\"selectnode\",funcPreviewSelect);\r\n                preview.templateData = new NodeGraphTemplate();\r\n                preview.templateData.saveSocket(socket);\r\n                console.log(preview.templateData);\r\n                preview.addNodeClass('preview-independ')\r\n                this.independentPreviewInteraction.installPreview(preview);\r\n            }else{\r\n                translationAnimationTimer = setInterval(\r\n                    ()=>{\r\n                        let moved = [preview.position[0]-idlePosition[0],\r\n                            preview.position[1]-idlePosition[1]];\r\n                        let finalPos = [preview.position[0]-moved[0]*0.07,\r\n                            preview.position[1]-moved[1]*0.07]\r\n                        preview.setPosition(this.editor,finalPos);\r\n                        funcPreviewTranslated();\r\n                    },30\r\n                )\r\n            }\r\n            \r\n        }\r\n\r\n        \r\n        socket.node.on(\"translatenode\",func);\r\n        socket.node.on(\"noderemoved\",funcRemove);\r\n        socket.node.on(\"nodeworked\",funcNodeUpdate);\r\n        preview.on(\"translatenode\",funcPreviewTranslated);\r\n        preview.on(\"nodedraged\",funcDragPreview);\r\n        preview.on(\"selectnode\",funcPreviewSelect);\r\n        func();\r\n        idlePosition = [...preview.position]\r\n        return preview;\r\n    }\r\n\r\n    removePreviewAlongSocket(socket){\r\n        const id = genAlongSocketID(socket);\r\n        this.removePreview(id)\r\n    }\r\n\r\n    removePreviewsSurroundNode(node){\r\n        console.log(\"remove previews\",node)\r\n        let nv = this.getNodeView(node);\r\n        if(!nv){\r\n            return; //already deleted\r\n        }\r\n        let sockets = nv.sockets;\r\n        for(let socket of sockets.keys()){\r\n            this.removePreviewAlongSocket(socket);\r\n        }\r\n    }\r\n\r\n    //TODO: better layout\r\n    async addPreviewsSurroundNode(node){\r\n        let nv = this.getNodeView(node);\r\n        let sockets = nv.sockets;\r\n        let previewArray = []\r\n        let layouter = new NodePreviewLayoutInfo(this,node);\r\n        for(let socket of sockets.keys()){\r\n            const preview = await this.addPreviewAlongSocket(socket,(socket)=>{return layouter.offsets.get(socket)});\r\n            previewArray.push(preview)\r\n        }\r\n        layouter.relayoutAll();\r\n        return previewArray\r\n    }\r\n\r\n    setupInteraction(node){\r\n        //https://developer.mozilla.org/zh-CN/docs/Web/API/Pointer_events\r\n        let nv = this.getNodeView(node);\r\n        const el = nv.el;\r\n        let v = new PreviewInteractionPointFloat(this,node,el,this._enablePreviewTime);\r\n        this.pointFloat.set(node.id,v);\r\n    }\r\n\r\n    set enablePreview(v){\r\n        if(this._enablePreview==v){\r\n            return;\r\n        }\r\n        this._enablePreview = v\r\n        const time = this._enablePreviewTime\r\n        console.log(this.pointFloat)\r\n        for(let pf of this.pointFloat.values()){\r\n            pf.timeoutIn = time;\r\n        }\r\n    }\r\n\r\n    get _enablePreviewTime(){\r\n        return this._enablePreview?200:-1\r\n    }\r\n}\r\n\r\nclass IndependentPreviewInteraction{\r\n    constructor(manager){\r\n        this.manager = manager;\r\n        this.editor = this.manager.editor;\r\n        this.tempTemplate = null;\r\n    }\r\n\r\n\r\n\r\n    installPreview(preview){\r\n        preview.operations = []\r\n        preview.state='apply'\r\n        const funcCheckCompleteNew = ()=>{\r\n            let tdata = preview.templateData;\r\n            let nv = this.manager.getNodeView(tdata.fromSocket.node);\r\n            let createCompleteNew=false;\r\n\r\n            nv = this.manager.getNodeView(tdata.outputSocket.node);\r\n            console.log(nv)\r\n            if(nv){\r\n                nv = nv.sockets.get(tdata.outputSocket);\r\n                console.log(nv)\r\n            }else{\r\n                nv=null\r\n            }\r\n            if(nv){\r\n                this.tempTemplate.saveSocket(tdata.outputSocket);\r\n            }else{\r\n                this.tempTemplate = null;\r\n                createCompleteNew=true;\r\n            }\r\n            return createCompleteNew;\r\n        }\r\n        preview.applyFunc2 = async ()=>{\r\n            let refPosition = [...preview.position];\r\n            refPosition[0] -= preview.el.clientWidth\r\n            refPosition[1] -= preview.el.clientHeight\r\n            await preview.templateData.applyToEditor(this.editor,funcCheckCompleteNew(),refPosition)\r\n        };\r\n        preview.applyFunc = async ()=>{\r\n            let refPosition = [...preview.position];\r\n            refPosition[0] -= preview.el.clientWidth\r\n            refPosition[1] -= preview.el.clientHeight\r\n            await preview.templateData.applyToEditor(this.editor,true,refPosition)\r\n        };\r\n        const funcIndependOnEnter = async (e)=>{\r\n            console.log(\"pointerEnter\",e)\r\n            const viewNodes = this.editor.view.nodes\r\n            this.tempTemplate = new NodeGraphTemplate();\r\n            let tdata = preview.templateData;\r\n            let nv = this.manager.getNodeView(tdata.fromSocket.node);\r\n            let createCompleteNew=funcCheckCompleteNew();\r\n\r\n            //this.tempTemplate.saveSocket(preview.templateData.fromSocket);\r\n            for(let nodeTemplate of preview.templateData.nodes.values()){\r\n                let node = nodeTemplate.ref;\r\n                if(viewNodes.has(node)){\r\n                    node.addNodeClass('node-highlight')\r\n                    preview.operations.push(\r\n                        ()=>{node.removeNodeClass('node-highlight')}\r\n                    )\r\n                    for(let key in nodeTemplate.data){\r\n                        const templateData = nodeTemplate.data[key]\r\n                        if(typeof templateData == \"undefined\"){\r\n                            continue;\r\n                        }\r\n                        \r\n                        const curData = node.data[key]\r\n                        if(typeof curData == \"undefined\"){\r\n                            continue;\r\n                        }\r\n                        let isEqual = templateData==curData;\r\n                        if(!isEqual && \r\n                            templateData instanceof Variable &&\r\n                            curData instanceof Variable){\r\n                                isEqual = templateData.isEquals(curData);\r\n                            }\r\n                        if(!isEqual){\r\n                            let control = node.getControl(key)\r\n                            if(control){\r\n                                console.log(control);\r\n                                node.addControlStyle(control,'border: solid 1px red;')\r\n                                preview.operations.push(\r\n                                    ()=>{node.removeControlStyle(control,'border: solid 1px red;')}\r\n                                )\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }//end for\r\n            let refPosition = [...preview.position];\r\n            refPosition[0] -= preview.el.clientWidth\r\n            refPosition[1] -= preview.el.clientHeight\r\n            let nodes = await preview.templateData.applyToEditor(this.editor,createCompleteNew,refPosition)\r\n            for(let node of nodes.values()){\r\n                node.addNodeClass('node-highlight-fake')\r\n            }\r\n            preview.operations.push(\r\n                ()=>{\r\n                    console.log(\"remove nodes\",nodes)\r\n                    for(let node of nodes.values()){\r\n                        node.removeNodeClass('node-highlight-fake')\r\n                        this.editor.removeNode(node);\r\n                    }\r\n                }\r\n            )\r\n        }\r\n        const funcIndependOnLeave = async (e)=>{\r\n            console.log(\"pointerLeave\",e)\r\n            for(const f of preview.operations){\r\n                f();\r\n            }\r\n            preview.operations=[]\r\n            if(this.tempTemplate){\r\n                await this.tempTemplate.applyToEditor(this.editor)\r\n            }\r\n        }\r\n        preview.el.addEventListener(\"pointerenter\",funcIndependOnEnter);\r\n        preview.el.addEventListener(\"pointerleave\",funcIndependOnLeave);\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction minPos(a,b){\r\n    return [Math.min(a[0],b[0]),Math.min(a[1],b[1])]\r\n}\r\n\r\nfunction maxPos(a,b){\r\n    return [Math.max(a[0],b[0]),Math.max(a[1],b[1])]\r\n}\r\n\r\nclass NodePreviewLayoutInfo{\r\n    constructor(manager,node){\r\n        this.node=node;\r\n        this.manager = manager;\r\n        let nv = manager.getNodeView(node);\r\n        let sockets = nv.sockets;\r\n        let ins = []\r\n        let outs = []\r\n        let inSocketPosMin = null\r\n        let inSocketPosMax = null\r\n        let outSocketPosMin = null\r\n        let outSocketPosMax = null\r\n        let inSocketPos =[0,0]\r\n        let outSocketPos =[0,0];\r\n        this.offsets = new Map();\r\n        for(let socket of sockets.keys()){\r\n            const pos = this.manager.getSocketView(socket).getPosition(socket.node);\r\n            if(socket instanceof Rete.Output){\r\n                outs.push(socket)\r\n                outSocketPos[0]+=pos[0];\r\n                outSocketPos[1]+=pos[1];\r\n                outSocketPosMax = outSocketPosMax?maxPos(outSocketPosMax,pos):pos\r\n                outSocketPosMin = outSocketPosMin?minPos(outSocketPosMin,pos):pos\r\n            }else{\r\n                ins.push(socket)\r\n                inSocketPos[0]+=pos[0];\r\n                inSocketPos[1]+=pos[1];\r\n                inSocketPosMax = inSocketPosMin?maxPos(inSocketPosMax,pos):pos\r\n                inSocketPosMin = inSocketPosMin?minPos(inSocketPosMin,pos):pos\r\n            }\r\n        }\r\n        if(ins.length>0){\r\n            inSocketPos[0]=inSocketPosMax[0]-inSocketPosMin[0];\r\n            inSocketPos[1]=inSocketPosMax[1]-inSocketPosMin[1];\r\n        }\r\n\r\n        if(outs.length>0){\r\n            outSocketPos[0]=outSocketPosMax[0]-outSocketPosMin[0];\r\n            outSocketPos[1]=outSocketPosMax[1]-outSocketPosMin[1];\r\n        }\r\n        this.inSocketAvgPos = inSocketPos;\r\n        this.outSocketAvgPos = outSocketPos;\r\n        this.ins=ins;\r\n        this.outs=outs;\r\n        this.relayoutAll();\r\n    }\r\n\r\n    relayoutAll(){\r\n        this.relayout(this.ins,this.inSocketAvgPos)\r\n        this.relayout(this.outs,this.outSocketAvgPos)\r\n    }\r\n\r\n    relayout(sockets,avgPos){\r\n        let offsetY = []\r\n        let curOffset = 0;\r\n        let blankSpace = 0;\r\n        let lastSocketPosY=null;\r\n        for(let i=0;i<sockets.length;i++){\r\n            const socket = sockets[i]\r\n            const id = genAlongSocketID(socket);\r\n            let preview = this.manager.previews.get(id);\r\n            let previewview = this.manager.getNodeView(preview)\r\n            let previewHeight = PreviewBoxNode.defaultHeight\r\n            if(previewview){\r\n                previewview = previewview.el;\r\n                previewHeight = previewview.clientHeight\r\n            }\r\n            const socketView = this.manager.getSocketView(socket);\r\n            const socketPos = socketView.getPosition(socket.node);\r\n            let socketHeight = 10;\r\n            if(socketView.el){\r\n                socketHeight = socketView.el.clientHeight;\r\n            }\r\n            if(i==0){\r\n                offsetY.push([curOffset+previewHeight/2,0]);\r\n                lastSocketPosY = socketPos[1]\r\n                blankSpace = socketHeight;\r\n            }else{\r\n                const blank = socketPos[1]-lastSocketPosY\r\n                blankSpace+=blank;\r\n                offsetY.push([curOffset+previewHeight/2,blank]);\r\n                lastSocketPosY = socketPos[1]\r\n            }\r\n            curOffset+=previewHeight+2;//tiny padding 2px\r\n            \r\n        }\r\n        const nv = this.manager.getNodeView(this.node);\r\n        const nodeHeight = nv.el.clientHeight;\r\n        const totalPreviewHeight = curOffset+blankSpace;\r\n        const decayFactor = -Math.max(0.2,Math.pow(Math.min(1,nodeHeight/totalPreviewHeight),2));\r\n        const totalDecayedPreviewHeight = curOffset+blankSpace*decayFactor;\r\n        //curOffset/2 <--> avgPos[1]/2\r\n        const worldOffsetY = -totalDecayedPreviewHeight/2;\r\n        let socketPos = -avgPos[1]/2;\r\n        for(let i=0;i<sockets.length;i++){\r\n            const socket = sockets[i]\r\n            const id = genAlongSocketID(socket);\r\n            socketPos+=offsetY[i][1];\r\n            const y = offsetY[i][0]+worldOffsetY-socketPos+(blankSpace/2-socketPos)*(decayFactor);//worldOffsetY+offsetY[i][0]+socketPos*(1-decayFactor);\r\n            this.offsets.set(socket,[20,y]);\r\n        }\r\n    }\r\n}\r\n\r\nclass PreviewInteractionPointFloat{\r\n    constructor(manager,node,el,timeoutIn=200, timeoutOut=800){\r\n        this.manager = manager;\r\n        this.el=el;\r\n        this.pres = [];\r\n        const STATE_OUT_DOM=0;\r\n        const STATE_IN_DOM=1;\r\n        const STATE_ALREADY_DONE=2;\r\n        const STATE_FADE_OUT=3;\r\n        this.state = STATE_OUT_DOM;\r\n        this.partState = false;\r\n        this.timerIn = null;\r\n        this.timerOut = null;\r\n        this.timeoutIn = timeoutIn\r\n        this.timeoutOut = timeoutOut\r\n\r\n        const executeInFunc = async ()=>{\r\n            this.state=STATE_ALREADY_DONE;\r\n            this.pres = await this.manager.addPreviewsSurroundNode(node);\r\n            for(let preview of this.pres){\r\n                const v = this.manager.getNodeView(preview);\r\n                const el = v.el;\r\n                el.addEventListener(\"pointerenter\",pointerenterFuncPreview);\r\n                el.addEventListener(\"pointerleave\",pointerleaveFuncPreview);\r\n            }\r\n            this.partState=false;\r\n        }\r\n\r\n        const executeOutFunc = ()=>{\r\n            this.state=STATE_OUT_DOM;\r\n            this.manager.removePreviewsSurroundNode(node);\r\n            let newpres = []\r\n            //add not removed previews\r\n            for(let preview of this.pres){\r\n                if(preview.state=='lock'){\r\n                    newpres.push(preview)\r\n                }\r\n            }\r\n            this.pres = newpres;\r\n            if(this.pres.length){\r\n                this.partState=true;\r\n                //this.state=STATE_ALREADY_DONE;\r\n            }else{\r\n                this.partState=false;\r\n            }\r\n        }\r\n\r\n        // for previews:\r\n        const pointerenterFuncPreview = (e)=>{\r\n            switch(this.state){\r\n                case STATE_FADE_OUT:\r\n                    this.state = STATE_ALREADY_DONE;\r\n                    clearTimeout(this.timerOut);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        const pointerleaveFuncPreview = (e)=>{\r\n            switch(this.state){\r\n                case STATE_ALREADY_DONE:\r\n                    this.state = STATE_FADE_OUT;\r\n                    if(this.partState){\r\n                        clearTimeout(this.timerIn);\r\n                    }\r\n                    this.timerOut = setTimeout(executeOutFunc,this.timeoutOut);\r\n                    break;\r\n                case STATE_OUT_DOM:\r\n                    if(this.partState){\r\n                        this.timerOut = setTimeout(executeOutFunc,this.timeoutOut);\r\n                    }\r\n            }\r\n        }\r\n\r\n        // for nodes ==========================\r\n\r\n        const pointerenterFunc = (e)=>{\r\n            switch(this.state){\r\n                case STATE_OUT_DOM:\r\n                    this.state = STATE_IN_DOM;\r\n                    this.timerIn = this.timeoutIn<0?null:setTimeout(executeInFunc,this.timeoutIn);\r\n                    clearTimeout(this.timerOut);\r\n                    break;\r\n                case STATE_FADE_OUT:\r\n                    this.state = STATE_ALREADY_DONE;\r\n                    clearTimeout(this.timerOut);\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        //const pointermoveFunc = function(e){\r\n            //TODO: prolong the delay when user move across the node fast\r\n            /*switch(this.state){\r\n                case STATE_IN_DOM:\r\n                    break;\r\n            }*/\r\n        //}\r\n        const pointerleaveFunc = (e)=>{\r\n            switch(this.state){\r\n                case STATE_ALREADY_DONE:\r\n                    this.state = STATE_FADE_OUT;\r\n                    this.timerOut = setTimeout(executeOutFunc,this.timeoutOut);\r\n                    break;\r\n                case STATE_IN_DOM:\r\n                    this.state = STATE_OUT_DOM;\r\n                    clearTimeout(this.timerIn);\r\n                    break;\r\n            }\r\n        }\r\n        el.addEventListener(\"pointerenter\",pointerenterFunc);\r\n        el.addEventListener(\"pointerleave\",pointerleaveFunc);\r\n        //el.addEventListener(\"pointermove\",pointermoveFunc);\r\n    }\r\n\r\n}\r\n\r\nexport default PreviewManager;","import \"@babel/polyfill\";\r\nimport Rete from \"rete\";\r\nimport ConnectionPlugin from \"rete-connection-plugin\";\r\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\r\n\r\nimport ContextMenuPlugin from \"rete-context-menu-plugin\";\r\nimport AreaPlugin from \"rete-area-plugin\";\r\nimport NodeListener from \"../NodeListener\";\r\n\r\nimport PreviewComponent from \"../comp/PreviewComponent\";\r\n\r\nimport NumComponent from \"../comp/NumComponent\";\r\nimport {\r\n    addComponent,minusComponent,divComponent,multiComponent\r\n} from \"../comp/ComputeComponent\";\r\nimport OutputComponent from \"../comp/OutputComponent\";\r\nimport InputComponent from \"../comp/InputComponent\"\r\nimport {\r\n    Floats2RGComponent,\r\n    Floats2RGBComponent,\r\n    Floats2RGBAComponent\r\n} from \"../comp/Floats2RGBComponent\";\r\nimport {\r\n    RG2FloatsComponent,\r\n    RGB2FloatsComponent,\r\n    RGBA2FloatsComponent\r\n}from \"../comp/BreakVec3Component\";\r\nimport { dotComponent } from \"../comp/DotComponent\";\r\nimport Vec2Component from \"../comp/Vec2Component\";\r\nimport Vec3Component from \"../comp/Vec3Component\";\r\nimport Vec4Component from \"../comp/Vec4Component\";\r\n//import component here\r\nimport { Method, Variable } from \"../compile/DataDefine\";\r\n\r\nimport {emptyDom} from \"./utility\"\r\n\r\nimport MaterialBuilder, { SUFFIX } from \"./MaterialBuilder\";\r\nimport {extractMeshBufferType} from \"./utility\"\r\n\r\nimport PreviewManager from \"./PreviewManager\";\r\nimport {MethodTemplateComponent, MethodsList} from \"../comp/MethodTemplateComponent\"\r\nimport {methods} from \"../compile/PredefinedMethod\"\r\n\r\nclass ReteManager{\r\n\r\n    constructor(container,modelStore_=null){\r\n        this.container = container;\r\n        //this is a global context description, when it changes, the whole editor will be changed\r\n        //mesh indicates a reference of the input data structure.\r\n        this.context={\r\n            mesh:null,\r\n            name:\"shader\",\r\n            matBuilder : new MaterialBuilder(),\r\n            modelStore : modelStore_\r\n        }; \r\n        this.components=[];\r\n        this.previewManager=null;\r\n        //this._buildComponents();\r\n        //this._initEditor(\"shader\");\r\n    }\r\n\r\n    _initEditor(name){\r\n        let editor = new Rete.NodeEditor(`${name}@0.1.0`, this.container);\r\n        this.editor = editor;\r\n        editor.use(ConnectionPlugin);\r\n        editor.use(VueRenderPlugin);\r\n        editor.use(ContextMenuPlugin);\r\n        editor.use(AreaPlugin);\r\n        editor.use(PreviewComponent);\r\n        editor.use(NodeListener);\r\n\r\n        let engine = new Rete.Engine(`${name}@0.1.0`);\r\n        this.engine = engine;\r\n\r\n        this.components.map((c) => {\r\n          editor.register(c);\r\n          engine.register(c);\r\n        });\r\n\r\n        \r\n        editor.on(\r\n            \"process nodecreated noderemoved connectioncreated connectionremoved\",\r\n            async () => {\r\n              console.log(\"process\");\r\n              await engine.abort();\r\n              await engine.process(editor.toJSON());\r\n            }\r\n          );\r\n\r\n        this._initNode();\r\n\r\n        editor.view.resize();\r\n        AreaPlugin.zoomAt(editor);\r\n        editor.trigger(\"process\");\r\n\r\n        this.previewManager = new PreviewManager(this.editor,this);\r\n        console.log(this.editor);\r\n    }\r\n\r\n    removeAll(){\r\n        delete this.editor;\r\n        delete this.engine;\r\n        for(let i=0;i<this.components.length;i++){\r\n            delete this.components[i];\r\n        }\r\n        delete this.components;\r\n        this.components = []\r\n        emptyDom(this.container);\r\n    }\r\n\r\n    //for fast prototype only\r\n    _addMethod(method,name,outputName='Result',nameMapping={}){\r\n        if(!method.length){\r\n            method = [method]\r\n        }\r\n        let keys = []\r\n        for(let i in nameMapping){\r\n            keys.push(i)\r\n        }\r\n        let methodlist = new MethodsList(method,outputName,nameMapping,keys)\r\n        let comp = new MethodTemplateComponent(name,methodlist);\r\n        this.components.push(comp);\r\n    }\r\n\r\n    _buildComponents(){\r\n        this.outputComponent = new OutputComponent();\r\n        this.components =[\r\n            new NumComponent(),\r\n            addComponent,minusComponent,divComponent,multiComponent,dotComponent,\r\n            new Vec2Component(),\r\n            new Vec3Component(),\r\n            new Vec4Component(),\r\n            new Floats2RGComponent(),\r\n            new Floats2RGBComponent(),\r\n            new Floats2RGBAComponent(),\r\n            new RG2FloatsComponent(),\r\n            new RGB2FloatsComponent(),\r\n            new RGBA2FloatsComponent(),\r\n            this.outputComponent\r\n            // Add component here\r\n        ];\r\n  \r\n        // Input component, automatically generated.\r\n        const mesh = this.context.mesh;\r\n        if(mesh){\r\n            const attrs = mesh.geometry.attributes;\r\n            for(const k in attrs){\r\n                const v = attrs[k];\r\n                const typeName = extractMeshBufferType(v);\r\n                if(typeName){\r\n                    let comp = new InputComponent(`${k} (${typeName})`,typeName,new Variable(typeName,`${k}${SUFFIX}`));\r\n                    console.log(`Add component: ${k} (${typeName})`)\r\n                    this.components.push(comp);\r\n                }\r\n            }\r\n        }\r\n\r\n        //hard coded for the fast prototype!\r\n        let comp = new InputComponent(`Texture (Texture2D)`,'texture2D',new Variable('texture2D',`ourTexture`));\r\n        \r\n\r\n        this._addMethod(\r\n            new Method('sampleTexture2D',\r\n                {\r\n                    't':'texture2D',\r\n                    'uv':'vec2'\r\n                },\r\n                'vec4',\r\n                ()=>{},\r\n                'texture2D(#t#,#uv#)'\r\n                ),\r\n            'Sample Texture',\r\n            'Color (Vec4)',\r\n            {\r\n                't':'Texture',\r\n                'uv':'Sample Position (UV)'\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            new Method('CrossProduct',\r\n                {\r\n                    'a':'vec3',\r\n                    'b':'vec3'\r\n                },\r\n                'vec3',\r\n                (a,b)=>{\r\n                    return [\r\n                        a[1]*b[2]-b[1]*a[2],\r\n                        a[2]*b[0]-b[2]*a[0],\r\n                        a[0]*b[1]-b[0]*a[1]\r\n                    ]\r\n                },\r\n                'cross(#t#,#uv#)'\r\n                ),\r\n            'Cross Product',\r\n            'Vector 3',\r\n            {\r\n                'a':'Value a',\r\n                'b':'Value b'\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['step'],\r\n            'Threshold',\r\n            'Is Pass?',\r\n            {\r\n                'v1':'Threshold',\r\n                'v2':'Test value'\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['mix'],\r\n            'Mix',\r\n            'Result',\r\n            {\r\n                'v1':'Value 1',\r\n                'v2':'Value 2',\r\n                'v3':'weight'\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['max'],\r\n            'Max',\r\n            'Result',\r\n            {\r\n                'v1':'Value 1',\r\n                'v2':'Value 2',\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['min'],\r\n            'Min',\r\n            'Result',\r\n            {\r\n                'v1':'Value 1',\r\n                'v2':'Value 2',\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['pow'],\r\n            'Power',\r\n            'A^B',\r\n            {\r\n                'v1':'Value A',\r\n                'v2':'Value B',\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['sin'],\r\n            'Sin',\r\n            'result',\r\n            {\r\n                'v1':'Value A',\r\n                'v2':'Value B',\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['cos'],\r\n            'Cos',\r\n            'result',\r\n            {\r\n                'v1':'Value A',\r\n                'v2':'Value B',\r\n            }\r\n        )\r\n\r\n        this._addMethod(\r\n            methods['tan'],\r\n            'Tan',\r\n            'result',\r\n            {\r\n                'v1':'Value A',\r\n                'v2':'Value B',\r\n            }\r\n        )\r\n\r\n        \r\n\r\n        \r\n        this.components.push(comp);\r\n        this.outputComponent.addWorkEvent((node) => {\r\n          console.log(\"--- Final result ---\");\r\n          let result = node.result[0];\r\n          console.log(result);\r\n          this.context.matBuilder.fragShader = result;\r\n          console.log(\"------- END -------\")\r\n          this.context.modelStore.applyMaterialToAll(this.context.matBuilder.newMaterial)\r\n        });\r\n\r\n    }\r\n\r\n    //rebuild the whole node editor, this will remove all the content we have currently\r\n    rebuild(){\r\n        this.removeAll();\r\n        this._buildComponents();\r\n        this._initEditor(this.context.name);\r\n    }\r\n\r\n    // set model store\r\n    set modelStore(ms){\r\n        console.log(\"Set modelStore in rete\")\r\n        this.context.modelStore = ms;\r\n        this.mesh = ms.sampleMesh;\r\n    }\r\n\r\n    set mesh(mesh_){\r\n        this.context.mesh=mesh_;\r\n        this.context.matBuilder.mesh=mesh_;\r\n        if(mesh_){\r\n            this.context.name = mesh_.uuid;\r\n        }\r\n        this.rebuild();\r\n    }\r\n\r\n    async _initNode(){\r\n        console.log(\"hi\")\r\n        console.log(this.components);\r\n        const components = this.components;\r\n        const editor = this.editor;\r\n        let n1 = await components[0].createNode({ num: 2 });\r\n        let n2 = await components[0].createNode({ num: 0 });\r\n        let add = await components[1].createNode();\r\n        let output = await this.outputComponent.createNode();\r\n\r\n        n1.position = [0, 200];\r\n        n2.position = [0, 400];\r\n        add.position = [300, 240];\r\n        output.position = [600,0];\r\n\r\n        editor.addNode(n1);\r\n        editor.addNode(n2);\r\n        editor.addNode(add);\r\n        editor.addNode(output);\r\n        editor.connect(n1.outputs.get(\"num\"), add.inputs.get(\"num\"));\r\n        editor.connect(n2.outputs.get(\"num\"), add.inputs.get(\"num2\"));\r\n        \r\n    }\r\n\r\n}\r\n\r\nexport default ReteManager;","import { render } from \"./Rete.vue?vue&type=template&id=2ed7a4be&scoped=true\"\nimport script from \"./Rete.vue?vue&type=script&lang=js\"\nexport * from \"./Rete.vue?vue&type=script&lang=js\"\n\nimport \"./Rete.vue?vue&type=style&index=0&id=2ed7a4be&scoped=true&lang=sass\"\nimport \"./Rete.vue?vue&type=style&index=1&id=2ed7a4be&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ed7a4be\"]])\n\nexport default __exports__","<template>\r\n  <canvas id=\"threejscanvas\" ref=\"threejscanvas\"></canvas>\r\n</template>\r\n<script>\r\nimport {initThree} from \"../node/utility/RenderManager\"\r\nexport default {\r\n    name:\"RenderVue\",\r\n  mounted() {\r\n      this.$nextTick(()=>{\r\n          console.log(this.$refs)\r\n          initThree(this.$refs.threejscanvas);\r\n           \r\n      })\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n#threejscanvas {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    pointer-events: none;\r\n    z-index: 1;\r\n  }\r\n</style>","import { render } from \"./RenderVue.vue?vue&type=template&id=4a53f46c\"\nimport script from \"./RenderVue.vue?vue&type=script&lang=js\"\nexport * from \"./RenderVue.vue?vue&type=script&lang=js\"\n\nimport \"./RenderVue.vue?vue&type=style&index=0&id=4a53f46c&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=3721b798\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3721b798&lang=css\"\n\nimport exportComponent from \"D:\\\\dev\\\\projects\\\\web\\\\flowcoding\\\\flowshading\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nimport \"@babel/polyfill\";\n\nlet app = createApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PreviewBox.vue?vue&type=style&index=0&id=36c3bdb3&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJiMzM2NjQ5ZGYxNWJhYjY0MTBmZjdhZWM0YmNkZmRkNC5wbmciOw==\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CustomNode.vue?vue&type=style&index=0&id=7157b3a2&lang=sass\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VueDynamicControl.vue?vue&type=style&index=0&id=1d0683ba&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RenderVue.vue?vue&type=style&index=0&id=4a53f46c&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Rete.vue?vue&type=style&index=0&id=2ed7a4be&scoped=true&lang=sass\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VueVec4Control.vue?vue&type=style&index=0&id=49839787&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Rete.vue?vue&type=style&index=1&id=2ed7a4be&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VueVec2Control.vue?vue&type=style&index=0&id=13a8162a&scoped=true&lang=css\""],"sourceRoot":""}